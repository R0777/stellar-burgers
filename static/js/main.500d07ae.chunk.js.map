{"version":3,"sources":["components/App/App.module.scss","pages/Profile/ProfileLink/ProfileLink.module.scss","pages/Profile/ProfileHistory/ProfileHistory.module.scss","pages/Ingredients/Ingredients.module.scss","components/Modal/Modal.module.scss","components/Modal/ModalOverlay/ModalOverlay.module.scss","services/api/enumEndpoints.tsx","components/AppHeader/AppHeaderItem/AppHeaderItem.tsx","components/AppHeader/AppHeader.tsx","services/hooks/index.tsx","components/BurgerIngredients/BurgerIngredientsCard/BurgerIngredientsCard.tsx","components/BurgerIngredients/BurgerIngredientsContainer/BurgerIngredientsContainer.tsx","components/Tabs/Tabs.jsx","components/BurgerIngredients/BurgerIngredients.tsx","services/api/index.tsx","services/utils/cookie.tsx","pages/Feed/FeedOrder/FeedOrder.tsx","services/api/constructor.tsx","services/store/order/orderSlice.tsx","services/utils/formatDataIngredients.tsx","services/store/ingredients/ingredientsSlice.tsx","components/App/utils.tsx","components/BurgerConstructor/BurgerConstructorDragElement.tsx","components/BurgerConstructor/BurgerContstuctor.tsx","images/buns.png","pages/Main/Main.tsx","services/api/auth.tsx","services/store/auth/authSlice.tsx","pages/Login/Login.tsx","pages/Register/Register.tsx","pages/ForgotPassword/ForgotPassword.tsx","pages/Profile/ProfileForm/ProfileForm.tsx","pages/Profile/ProfileLink/ProfileLink.tsx","services/utils/findIngredient.tsx","services/utils/formatDate.tsx","services/utils/capitalizeFirstLetter.tsx","pages/Feed/Feed.tsx","pages/Feed/FeedOrderCard/FeedOrderCard.tsx","pages/Profile/ProfileHistory/ProfileHistory.tsx","pages/Profile/Profile.tsx","pages/Ingredients/Ingredients.tsx","pages/ResetPassword/ResetPassword.tsx","pages/NotFound/NotFound.tsx","components/ProtectedRoute.tsx","components/Modal/ModalOverlay/ModalOverlay.tsx","components/Modal/Modal.tsx","components/OrderDetails/OrderDetails.tsx","components/App/App.tsx","reportWebVitals.ts","services/store/index.tsx","services/middlewares/socket.tsx","index.tsx","components/BurgerConstructor/burgerConstructor.module.scss","pages/Feed/Feed.module.scss","pages/Feed/FeedOrderCard/FeedOrderCard.module.scss","pages/Feed/FeedOrder/FeedOrder.module.scss","pages/Profile/Profile.module.scss","components/AppHeader/AppHeader.module.scss","pages/NotFound/NotFound.module.scss","pages/Main/Main.module.scss","components/AppHeader/AppHeaderItem/AppHeaderItem.module.scss","components/BurgerIngredients/burgerIngredients.module.scss","components/BurgerIngredients/BurgerIngredientsCard/burgerIngredientsCard.module.scss","components/BurgerIngredients/BurgerIngredientsContainer/burgerIngredientsContainer.module.scss","pages/Login/Login.module.scss","pages/Register/Register.module.scss","pages/ForgotPassword/ForgotPassword.module.scss","pages/ResetPassword/ResetPassword.module.scss","components/OrderDetails/OrderDetails.module.scss"],"names":["module","exports","EnumEndpoints","AppHeaderItem","icon","text","to","className","match","useRouteMatch","path","exact","clsx","s","root","selected","AppHeader","header","content","navigation","type","flexEnd","logo","useDispatch","dispatchHook","useSelector","selectorHook","BurgerIngredientsCard","ingredient","history","useHistory","location","useLocation","selectedIngredients","state","ingredients","useDrag","item","ref","countBun","bun","_id","countOther","other","length","filter","onClick","push","pathname","background","card","count","size","src","image","alt","name","priceRow","price","React","memo","BurgerIngredientsContainer","data","title","customRef","map","TABS","value","Tabs","current","setCurrent","style","display","active","BurgerIngredients","useState","containerRef","useRef","bunRef","mainRef","sauceRef","handleClickTab","useCallback","onScroll","bunPos","mainPos","saucePos","containerPos","Math","trunc","getBoundingClientRect","top","initValue","minCount","min","forEach","minRes","abs","pos","checkPos","ingredientsList","sauce","main","BASE_URL","enumStatusOrder","getCookie","matches","document","cookie","RegExp","replace","decodeURIComponent","undefined","setCookie","props","exp","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","deleteCookie","constructorAPI","fetch","method","mode","cache","credentials","headers","redirect","referrerPolicy","then","res","ok","Error","status","json","form","orders","Authorization","body","JSON","stringify","success","message","postOrder","createAsyncThunk","idArray","a","wsConnectionStart","createAction","wsConnectionClose","orderSlice","createSlice","initialState","orderMade","total","totalToday","wsConnected","wsError","reducers","cleanOrderMade","cleanOrders","wsConnectionOpened","wsGotMessage","action","payload","wsGotError","wsClosed","extraReducers","builder","addCase","fulfilled","rejected","console","log","actions","formatData","arr","mainArr","sauceArr","bunArr","fetchIngredients","ingredientsSlice","addSelectedIngredient","newOther","addEl","deleteSelectedIngredient","index","splice","deleteEl","changePosition","dragIndex","hoverIndex","currentState","dragEl","cleanBasket","formatDataIngredients","BurgerConstructorDragElement","dispatch","useDrop","accept","collect","monitor","handlerId","getHandlerId","hover","hoverBoundingRect","hoverMiddleY","bottom","hoverClientY","getClientOffset","y","drop","isDragging","opacity","drag","lineElement","thumbnail","image_mobile","handleClose","BurgerConstructor","isShowLoader","setShowLoader","refreshToken","localStorage","getItem","isHover","isOver","isEmptyConstructor","useMemo","arrayOtherIds","reduce","acc","elem","handleClickButton","from","totalBun","totalOther","over","ingredientsContainer","isLocked","list","orderContainer","position","minWidth","minHeight","loader","Main","burgerContainer","DndProvider","backend","HTML5Backend","authAPI","forgotResetPassword","resetPassword","registerUser","loginUser","logoutUser","updateToken","user","accessToken","setItem","patchUser","getUser","authSlice","userData","setUserData","Login","email","password","setForm","inputRef","onIconClick","setTimeout","focus","alert","onChangeInput","e","prevState","target","handleSubmit","event","preventDefault","onSubmit","placeholder","onChange","error","errorText","Register","ForgotPassword","setValue","ProfileForm","auth","buttonLine","ProfileLink","link","findIngredient","id","key","find","formatDate","date","today","comparisonDate","parseISO","timeZone","toLocaleDateString","timeZoneName","split","string","formatRelative","locale","ru","charAt","toUpperCase","slice","ALL_ORDERS_URL","Feed","order","useEffect","handleClick","number","ordersDone","ordersPending","content__column","status__column","column__feed","text_color_bold","FeedOrder","profile","orderId","useParams","USER_ORDERS_URL","uniqueIngredients","Array","Set","orderPrice","curValue","textAlign","countIngredient","ingredients__item","img","flexBasis","createdAt","FeedOrderCard","hiddenCount","line","overflow","ProfileHistory","Profile","handleClickExit","token","removeItem","exit","Ingredients","ingredientId","image_large","ResetPassword","setPassword","code","setCode","NotFound","wrapper","container","ProtectedRoute","children","rest","isUserLoaded","setUserLoaded","init","render","modalRoot","getElementById","ModalOverlay","onClose","overlayRef","currentEl","handleClickClose","ev","addEventListener","removeEventListener","handleEsc","window","ReactDOM","createPortal","overlay","Modal","modal","OrderDetails","textColor","App","checkToken","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","store","configureStore","reducer","ingredientsReducer","orderReducer","authReducer","middleware","getDefaultMiddleware","concat","socket","next","toString","WebSocket","close","onopen","onclose","onerror","onmessage","parse","devTools","StrictMode"],"mappings":"6GACAA,EAAOC,QAAU,CAAC,IAAM,mB,oBCAxBD,EAAOC,QAAU,CAAC,KAAO,4B,oBCAzBD,EAAOC,QAAU,CAAC,KAAO,+B,oBCAzBD,EAAOC,QAAU,CAAC,WAAa,kC,oBCA/BD,EAAOC,QAAU,CAAC,MAAQ,uB,oBCA1BD,EAAOC,QAAU,CAAC,QAAU,gC,kECDhBC,E,yJCyBGC,EAb+B,SAAC,GAAiC,IAAhCC,EAA+B,EAA/BA,KAAMC,EAAyB,EAAzBA,KAAMC,EAAmB,EAAnBA,GAAIC,EAAe,EAAfA,UACtDC,EAAQC,YAAc,CACxBC,KAAMJ,EACNK,MAAc,KAAPL,IAGX,OACI,eAAC,IAAD,CAAMA,GAAIA,EAAIC,UAAWK,kBAAKC,IAAEC,KAAMP,EAAWC,GAASK,IAAEE,SAAU,OAAtE,UACKX,EACD,mBAAGG,UAAWK,kBAAK,OAAQ,0BAA3B,SAAuDP,QCmBpDW,EA5BuB,SAAC,GAAiB,IAAhBT,EAAe,EAAfA,UACpC,OACI,wBAAQA,UAAWK,kBAAKC,IAAEI,OAAQV,GAAlC,SACI,sBAAKA,UAAWK,kBAAKC,IAAEK,QAAS,mBAAhC,UACI,sBAAKX,UAAWM,IAAEM,WAAlB,UACI,cAAC,EAAD,CACId,KAAM,qEACND,KAAM,cAAE,aAAF,CAAagB,KAAO,YAC1Bd,GAAI,KACR,cAAC,EAAD,CACID,KAAM,4EACND,KAAM,cAAE,WAAF,CAAWgB,KAAO,YACxBd,GAAI,UACR,cAAC,EAAD,CACIC,UAAWM,IAAEQ,QACbhB,KAAM,kFACND,KAAM,cAAE,cAAF,CAAcgB,KAAO,YAC3Bd,GAAI,gBAEZ,qBAAKC,UAAWM,IAAES,KAAlB,SACI,cAAC,IAAD,CAAMhB,GAAI,IAAV,SACI,cAAC,OAAD,c,sGC9BXiB,EAAc,kBAAMC,eACpBC,EAAoDC,ICS3DC,EAAwD,SAAC,GAAkB,IAAjBC,EAAgB,EAAhBA,WACtDC,EAAUC,cAEVC,EAAWC,cACVC,EAAuBR,GAAY,SAACS,GAAD,OAAWA,EAAMC,eAApDF,oBAEP,EACWG,YAAQ,CAAChB,KAAM,cAAeiB,KAAMT,IAA3CU,EADJ,oBAYIC,EAAWN,EAAoBO,KAAOP,EAAoBO,IAAIC,MAAQb,EAAWa,KAAO,EACxFC,EAAaT,EAAoBU,MAAMC,QAAUX,EAChDU,MACAE,QAAO,SAACR,GAAD,OAAUA,EAAKI,MAAQb,EAAWa,OACzCG,OACL,OAAS,yCAAG,sBAAKN,IAAKA,EAAKQ,QAdH,WACpBjB,EAAQkB,KAAK,CACTC,SAAU,gBAAkBpB,EAAWa,IACvCP,MAAO,CACHe,WAAYlB,MAU6BxB,UAAWM,IAAEqC,KAAtD,UACa,QAApBtB,EAAWR,OACJmB,GAAY,cAAC,UAAD,CAASY,MAAOZ,EAAUa,KAAK,YAC3CV,GAAc,cAAC,UAAD,CAASS,MAAOT,EAAYU,KAAK,UAEvD,qBAAKC,IAAKzB,EAAW0B,MAAOC,IAAK3B,EAAW4B,OAC5C,sBAAKjD,UAAWM,IAAE4C,SAAlB,UACI,mBAAGlD,UAAU,+BAAb,SAA6CqB,EAAW8B,QACxD,cAAC,eAAD,CAActC,KAAK,eAEvB,mBAAGb,UAAU,6BAAb,SAA2CqB,EAAW4B,UAVjD,QAcEG,MAAMC,KAAKjC,G,iBCtCpBkC,EAAkE,SAAC,GAA8B,IAA7BC,EAA4B,EAA5BA,KAAMC,EAAsB,EAAtBA,MAAOC,EAAe,EAAfA,UACnF,OAAS,yCAAG,oBAAI1B,IAAK0B,EAAWzD,UAAWK,kBAAKC,IAAER,KAAM,QAA5C,SACP0D,IADI,IAEH,sBAAMxD,UACRM,IAAEsB,YADA,cAGF2B,EAAKG,KAAI,SAAC5B,GAAD,OAAW,cAAC,EAAD,CAAsCT,WAAYS,GAAtBA,EAAKI,QAHnD,WAOKkB,MAAMC,KAAKC,GCpBpBK,EAAO,CACX,CACEC,MAAO,MACPX,KAAM,kCAER,CACEW,MAAO,QACPX,KAAM,kCAER,CACEW,MAAO,OACPX,KAAM,+CAoBKY,EAhBF,SAAC,GAA6B,IAA3BC,EAA0B,EAA1BA,QAASC,EAAiB,EAAjBA,WACvB,OACE,qBAAKC,MAAO,CAAEC,QAAS,QAAvB,SACGN,EAAKD,KAAI,gBAAGE,EAAH,EAAGA,MAAOX,EAAV,EAAUA,KAAV,OACR,cAAC,MAAD,CAEEW,MAAOA,EACPM,OAAQJ,IAAYF,EACpBrB,QAAS,kBAAMwB,EAAWH,IAJ5B,SAMGX,GALIW,SCyFAO,EAvGmC,WAChD,MAA8Bf,IAAMgB,SAAS,OAA7C,mBAAON,EAAP,KAAgBC,EAAhB,KAEMM,EAAeC,iBAAuB,MACtCC,EAASD,iBAAuB,MAChCE,EAAUF,iBAAuB,MACjCG,EAAWH,iBAAuB,MAEhC1C,EAAgBV,GAAY,SAACS,GAAD,OAAWA,EAAMC,eAA7CA,YAEF8C,EAAiBC,uBAAY,SAAC7C,GAClCiC,EAAWjC,KACV,IA+DH,OACE,sBAAK9B,UAAWM,IAAEC,KAAlB,UACE,cAAC,EAAD,CAAMuD,QAASA,EAASC,WAAYW,IACpC,sBACEE,SAjEe,WACnB,IAAIC,EAAiB,EACjBC,EAAkB,EAClBC,EAAmB,EACnBC,EAAuB,EAEvBX,GAAgBA,EAAaP,UAC/BkB,EAAeC,KAAKC,MAClBb,EAAaP,QAAQqB,wBAAwBC,MAG7Cb,GAAUA,EAAOT,UACnBe,EAASI,KAAKC,MAAMX,EAAOT,QAAQqB,wBAAwBC,MAEzDZ,GAAWA,EAAQV,UACrBgB,EAAUG,KAAKC,MAAMV,EAAQV,QAAQqB,wBAAwBC,MAE3DX,GAAYA,EAASX,UACvBiB,EAAWE,KAAKC,MAAMT,EAASX,QAAQqB,wBAAwBC,MAwCjErB,EA3BiB,SACfsB,EACAL,GAEA,IAAIM,EAGA,CACF1B,MAAO,GACP2B,IAAK,QAgBP,OAbAF,EAAUG,SAAQ,SAAC1D,GACjB,GAAIwD,EAASC,IAAK,CAChB,IAAME,EAASR,KAAKS,IAAIV,EAAelD,EAAK6D,KAExCF,EAASH,EAASC,MACpBD,EAAW,CACT1B,MAAO9B,EAAK8B,MACZ2B,IAAKE,QAMNH,EAAS1B,MAEPgC,CAtCK,CACd,CACEhC,MAAO,MACP+B,IAAKd,GAEP,CAAEjB,MAAO,QAAS+B,IAAKZ,GACvB,CACEnB,MAAO,OACP+B,IAAKb,IA8BsBE,KAQ3BjD,IAAKsC,EACLrE,UAAWM,IAAEuF,gBAHf,UAKE,cAAC,EAAD,CACEpC,UAAWc,EACXf,MAAM,iCACND,KAAM3B,EAAYK,MAEpB,cAAC,EAAD,CACEwB,UAAWgB,EACXjB,MAAM,iCACND,KAAM3B,EAAYkE,QAEpB,cAAC,EAAD,CACErC,UAAWe,EACXhB,MAAM,6CACND,KAAM3B,EAAYmE,c,iCCxGfC,EAAW,qC,SRAZrG,K,0CAAAA,E,0CAAAA,E,kCAAAA,E,6BAAAA,E,8BAAAA,E,8BAAAA,E,+BAAAA,E,sBAAAA,E,sBAAAA,M,KSAL,ICiBKsG,EDjBCC,EAAY,SAACjD,GACxB,IAAMkD,EAAUC,SAASC,OAAOpG,MAC9B,IAAIqG,OACF,WAAarD,EAAKsD,QAAQ,yBAA0B,QAAU,aAGlE,OAAOJ,EAAUK,mBAAmBL,EAAQ,SAAMM,GAGvCC,GAAY,SAACzD,EAAcW,EAAe+C,GAErD,IAAIC,GADJD,EAAQA,GAAS,IACDE,QAChB,GAAkB,iBAAPD,GAAmBA,EAAK,CACjC,IAAME,EAAI,IAAIC,KACdD,EAAEE,QAAQF,EAAEG,UAAkB,IAANL,GACxBA,EAAMD,EAAME,QAAUC,EAEpBF,GAAOA,EAAIM,cACbP,EAAME,QAAUD,EAAIM,eAGtB,IAAIC,EAAgBlE,EAAO,KAD3BW,EAAQwD,mBAAmBxD,IAG3B,IAAK,IAAMyD,KAAYV,EAAO,CAC5BQ,GAAiB,KAAOE,EACxB,IAAMC,EAAYX,EAAMU,IACN,IAAdC,IACFH,GAAiB,IAAMG,GAG3BlB,SAASC,OAASc,GAGPI,GAAe,SAACtE,GAC3ByD,GAAUzD,EAAM,GAAI,CAAE4D,SAAU,KE9BrBW,GAAiB,WACF,OAAD,oHACNC,MAAMzB,EAAWrG,EAAciC,YAAa,CACrD8F,OAAQ,MACRC,KAAM,OACNC,MAAO,WACPC,YAAa,cACbC,QAAS,CACL,eAAgB,oBAEpBC,SAAU,SACVC,eAAgB,gBACjBC,MAAK,SAACC,GACL,IAAKA,EAAIC,GACL,MAAM,IAAIC,MAAM,OAASF,EAAIG,QAEjC,OAAOH,EAAII,UACZL,MAAK,qBAAE1E,QAhBS,sFADdiE,GAAiB,SAmBVe,GAEZ,OAAD,oHACcd,MAAMzB,EAAWrG,EAAc6I,OAAQ,CAChDd,OAAQ,OACRC,KAAM,OACNC,MAAO,WACPC,YAAa,cACbC,QAAS,CACL,eAAgB,mBAChBW,cAAevC,EAAU,UAE7B6B,SAAU,SACVC,eAAgB,cAChBU,KAAMC,KAAKC,UAAUL,KACtBN,MAAK,SAACC,GACL,OAAOA,EAAII,UACZL,MAAK,SAACC,GACL,IAAKA,EAAIW,QACL,MAAM,IAAIT,MAAMF,EAAIY,SAExB,OAAOZ,KAnBZ,sFCeMa,GAAYC,YACvB,kBADuC,uCAEvC,WAAOC,GAAP,SAAAC,EAAA,sEACiB1B,GAAyB,CAAE5F,YAAaqH,IADzD,mFAFuC,uDAO5BE,GAAoBC,YAC/B,2BAEWC,GAAoBD,YAAa,2BAWjCE,GAAaC,YAAY,CACpCtG,KAAM,QACNuG,aAX0B,CAC1BC,UAAW,GACXjB,OAAQ,GACRkB,MAAO,EACPC,WAAY,EACZC,aAAa,EACbC,QAAS,MAMTC,SAAU,CACRC,eAAgB,SAACpI,GACfA,EAAM8H,UAAY,IAEpBO,YAAa,SAACrI,GACZA,EAAM6G,OAAS,IAEjByB,mBAAoB,SAACtI,GACnBA,EAAMiI,aAAc,EACpBjI,EAAMkI,QAAU,MAElBK,aAAc,SAACvI,EAAOwI,GACpB,MAAsCA,EAAOC,QAArC5B,EAAR,EAAQA,OAAQkB,EAAhB,EAAgBA,MAAOC,EAAvB,EAAuBA,WACvBhI,EAAM6G,OAASA,EACf7G,EAAM+H,MAAQA,EACd/H,EAAMgI,WAAaA,GAErBU,WAAY,SAAC1I,EAAOwI,GAClBxI,EAAMkI,QAAUM,EAAOC,QACvBzI,EAAMiI,aAAc,GAEtBU,SAAU,SAAC3I,GACTA,EAAMkI,QAAU,KAChBlI,EAAMiI,aAAc,IAGxBW,cAAe,SAACC,GACdA,EAAQC,QAAQ1B,GAAU2B,WAAW,SAAC/I,EAAOwI,GAC3CxI,EAAM8H,UAAYU,EAAOC,WAE3BI,EAAQC,QAAQ1B,GAAU4B,UAAU,SAAChJ,EAAOwI,GACtCA,EAAOC,SACTQ,QAAQC,IAAR,cAA2BV,EAAOC,eAMnC,GAOHd,GAAWwB,QANbf,GADK,GACLA,eACAO,GAFK,GAELA,SACAL,GAHK,GAGLA,mBACAI,GAJK,GAILA,WACAH,GALK,GAKLA,aACAF,GANK,GAMLA,YAGaV,MAAf,Q,kBCzFeyB,GApBI,SAACC,GAClB,IAAIC,EAAyB,GACzBC,EAA0B,GAC1BC,EAAwB,GAU5B,OARAH,EAAIxF,SAAQ,SAAC1D,GACO,QAAdA,EAAKjB,MAAgBsK,EAAO3I,KAAKV,GAEnB,SAAdA,EAAKjB,MAAiBoK,EAAQzI,KAAKV,GAErB,UAAdA,EAAKjB,MAAkBqK,EAAS1I,KAAKV,MAGpC,CACLiE,KAAMkF,EACNhJ,IAAKkJ,EACLrF,MAAOoF,ICGEE,GAAmBpC,YAAiB,+BAAD,sBAAiC,sBAAAE,EAAA,sEAC5D1B,KAD4D,oFAgBpE6D,GAAmB9B,YAAY,CACxCtG,KAAM,cACNuG,aAdwB,CACxB5H,YAAa,CACTmE,KAAM,GACN9D,IAAK,GACL6D,MAAO,IAEXpE,oBAAqB,CACjBO,IAAK,KACLG,MAAO,KAOX0H,SAAU,CACNwB,sBAAuB,SAAC3J,EAAOwI,GAC3BxI,EAAMD,oBCvCG,SACnBC,EACAN,GAEA,GAAwB,QAApBA,EAAWR,KAEb,OADc,6BAAQc,GAAR,IAAeM,IAAKZ,IAGlC,IAAIkK,EAAQ,sBAAO5J,EAAMS,OAAb,CAAoBf,IAChC,OAAO,6BAAKM,GAAZ,IAAmBS,MAAOmJ,ID8BUC,CAAM7J,EAAMD,oBAAqByI,EAAOC,UAExEqB,yBAA0B,SAAC9J,EAAOwI,GAC9BxI,EAAMD,oBC7BM,SACtBC,EACA+J,GAEA,GAAqB,qBAAVA,EAAuB,CAChC,IAAIH,EAAQ,YAAO5J,EAAMS,OAEzB,OADAmJ,EAASI,OAAOD,EAAO,GAChB,6BAAK/J,GAAZ,IAAmBS,MAAOmJ,IAE1B,OAAO,gBAAK5J,GDoBwBiK,CAASjK,EAAMD,oBAAqByI,EAAOC,QAAQsB,QAEnFG,eAAgB,SAAClK,EAAOwI,GACpB,MAAgCA,EAAOC,QAAhC0B,EAAP,EAAOA,UAAWC,EAAlB,EAAkBA,WACZC,EAAelI,aAAQnC,GACzBS,EAAK,YAAO4J,EAAatK,oBAAoBU,OAE3C6J,EAAS7J,EAAM0J,GAErB1J,EAAMuJ,OAAOG,EAAW,GACxB1J,EAAMuJ,OAAOI,GAAa,EAAGE,GAE7BtK,EAAMD,oBAAN,6BACOsK,EAAatK,qBADpB,IAEIU,MAAOA,KAGf8J,YAAa,SAACvK,GACVA,EAAMD,oBAAsB,CACxBO,IAAK,KACLG,MAAO,MAInBmI,cAAe,SAACC,GACZA,EAAQC,QAAQW,GAAiBV,WAAW,SAAC/I,EAAOwI,GAChDxI,EAAMC,YAAcuK,GAAsBhC,EAAOC,YAErDI,EAAQC,QAAQW,GAAiBT,UAAU,SAAChJ,EAAOwI,GAC3CA,EAAOC,SACXQ,QAAQC,IAAR,cAA2BV,EAAOC,eAMvC,GAKHiB,GAAiBP,QAJjBQ,GADG,GACHA,sBACAG,GAFG,GAEHA,yBACAI,GAHG,GAGHA,eACAK,GAJG,GAIHA,YAGWb,MAAf,Q,UEcee,GAzF6D,SAAC,GAAyB,IAAxB/K,EAAuB,EAAvBA,WAAYqK,EAAW,EAAXA,MAChFW,EAAWrL,IACXe,EAAMuC,iBAA2B,MAEvC,EAIYgI,aAAQ,CAChBC,OAAQ,OACRC,QAFgB,SAERC,GACJ,MAAO,CACHC,UAAWD,EAAQE,iBAG3BC,MAPgB,SAOV9K,EAAY2K,GAA8B,IAAD,EAC3C,GAAK1K,EAAI+B,QAAT,CAIA,IAAMgI,EAAYhK,EAAK4J,MACjBK,EAAaL,EAEnB,GAAII,IAAcC,EAAlB,CAIA,IAAMc,EAAiB,UAAG9K,EAAI+B,eAAP,aAAG,EACpBqB,wBAEA2H,GAAgBD,EAAkBE,OAASF,EAAkBzH,KAAO,EAIpE4H,EAFeP,EAAQQ,kBAEkBC,EAAIL,EAAkBzH,IAEjE0G,EAAYC,GAAciB,EAAeF,GAIzChB,EAAYC,GAAciB,EAAeF,IAI7CT,EAASR,GAAe,CAACC,YAAWC,gBAEpCjK,EAAK4J,MAAQK,QA1CrB,mBAEQW,EAFR,KAEQA,UAEJS,EAJJ,KA8CA,EAIYtL,YAAQ,CAChBhB,KAAM,OACNiB,KAAM,WACF,MAAO,CAACT,aAAYqK,UAExBc,QAAS,SAACC,GAAD,MAAoB,CACzBW,WAAYX,EAAQW,iBAV5B,mBAcMC,EAdN,KAEQD,WAaF,EACA,EAIN,OAFAE,EAlBA,MAkBKH,EAAKpL,IAGN,sBACI/B,UAAWM,IAAEiN,YACbvJ,MAAO,CACPqJ,QAASA,GAETtL,IAAKA,EACL,kBAAiB2K,EANrB,UAOI,cAAC,WAAD,CAAU7L,KAAK,YACf,cAAC,qBAAD,CACIf,KAAMuB,EAAW4B,KACjBE,MAAO9B,EAAW8B,MAClBqK,UAAWnM,EAAWoM,aACtBC,YAAa,WACbrB,EAASZ,GAAyB,CAACpK,WAAYA,EAAYqK,kBCkD5DiC,GArIuC,WAClD,IAAMtB,EAAWrL,IAEjB,EAAsCoD,oBAAS,GAA/C,mBAAOwJ,EAAP,KAAqBC,EAArB,KACMvM,EAAUC,cACVC,EAAWC,cACXqM,EAAeC,aAAaC,QAAQ,gBAEnCtM,EAAuBR,GAAY,SAACS,GAAD,OAAWA,EAAMC,eAApDF,oBAEP,EAIW4K,aAAQ,CACfC,OAAQ,cACRC,QAAS,SAACC,GAAD,MAAc,CACnBwB,QAASxB,EAAQyB,WAErBf,KALe,SAKV9L,GACDgL,EAASf,GAAsBjK,OAVvC,mBAEQ4M,EAFR,KAEQA,QAEJlM,EAJJ,KAcMoM,IAAuBzM,EAAoBO,KAAQP,EAAoBU,OAASV,EAAoBU,MAAMC,OAAS,EAEnH4G,EAAUmF,mBAAQ,WACpB,IAQ6B,EARvBC,EAAgB3M,EACjBU,MACAkM,QAAO,SAACC,EAAgBC,GACrB,MAAM,GAAN,mBACOD,GADP,CAEIC,EAAKtM,QAEV,IACHR,EAAoBO,KACpBoM,EAAc7L,KAAd,UAAmBd,EAAoBO,WAAvC,aAAmB,EACbC,KAGV,OAAOmM,IACR,CAAC3M,IAEE+M,EAAiB,uCAAG,sBAAAvF,EAAA,0DAClBxH,EAAoBO,IADF,qBAEd6L,EAFc,wBAGdD,GAAc,GAHA,kBAMJxB,EAAStD,GAAUE,IANf,OAOVoD,EAASH,MACT2B,GAAc,GARJ,kDAUVA,GAAc,GACdjD,QAAQC,IAAR,MAXU,gCAcdvJ,EAAQiF,QAAQ,CACZ9D,SAAU,SACVd,MAAO,CACH+M,KAAMlN,KAjBA,gCAsBlBoJ,QAAQC,IAAR,iHAtBkB,0DAAH,qDA0BjB8D,EAAWjN,EAAoBO,IACC,EAAhCP,EAAoBO,IAAIkB,MACxB,EACAyL,EAAalN,EAAoBU,MAAMC,OAAS,EAChDX,EACGU,MACAkM,QAAO,SAACC,EAAczK,GACnB,OAAOyK,EAAMzK,EAAQX,QACtB,GACL,EAEN,OACI,qBAAKpB,IAAKA,EAAK/B,UAAWK,kBAAKC,IAAEC,KAAM0N,GAAW3N,IAAEuO,MAApD,SACKV,EAEO,sBAAKnO,UAAWM,IAAEwO,qBAAlB,UACKpN,EAAoBO,KAAQ,cAAC,qBAAD,CACzB8M,UAAU,EACVlO,KAAM,MACNf,KAAI,UAAK4B,EAAoBO,IAAIgB,KAA7B,6BACJE,MAAOzB,EAAoBO,IAAIkB,MAC/BqK,UAAW9L,EAAoBO,IAAIwL,eAEvC,qBAAKzN,UAAWM,IAAE0O,KAAlB,SACKtN,EAAoBU,OAASV,EACzBU,MACAsB,KAAI,SAAC5B,EAAM4J,GAAP,OAAkB,cAAC,GAAD,CAA6CrK,WAAYS,EAAM4J,MAAOA,GAAnC5J,EAAKI,UAEtER,EAAoBO,KAAQ,cAAC,qBAAD,CACzB8M,UAAU,EACVlO,KAAM,SACNf,KAAI,UAAK4B,EAAoBO,IAAIgB,KAA7B,uBACJE,MAAOzB,EAAoBO,IAAIkB,MAC/BqK,UAAW9L,EAAoBO,IAAIwL,eACvC,sBAAKzN,UAAWM,IAAE2O,eAAlB,UACI,sBAAKjP,UAAWK,kBAAKC,IAAEsC,MAAO,QAA9B,UACI,mBAAG5C,UAAWK,kBAAKC,IAAER,KAAM,iCAA3B,SACK6O,EAAWC,IAEhB,cAAC,eAAD,CAAc/N,KAAK,eAEvB,cAAC,SAAD,CAAQA,KAAK,UAAUgC,KAAK,QAAQN,QAASkM,EAA7C,SACI,qBACIzK,MAAO,CACPkL,SAAU,WACVC,SAAU,IACVC,UAAW,IAJf,SAMKxB,EACM,sBAAM5N,UAAWM,IAAE+O,SACnB,4FAOvB,mBAAGrP,UAAWK,kBAAKC,IAAEyC,MAAO,4BAA5B,SACI,qBAAKD,IC7Id,i+TD6IyBE,IAAI,oDErH7BsM,GAfC,WACd,OACE,0BAAStP,UAAWK,kBAAKC,IAAEyF,KAAM,mBAAjC,UACE,oBAAI/F,UAAWK,kBAAKC,IAAER,KAAM,4BAA5B,mGAGA,qBAAKE,UAAWM,IAAEiP,gBAAlB,SACE,eAACC,EAAA,EAAD,CAAaC,QAASC,IAAtB,UACE,cAAC,EAAD,IACA,cAAC,GAAD,a,6BCbGC,GAAU,SACApH,GAA0B,OAAD,oHAC/Bd,MAAMzB,EAAWrG,EAAciQ,oBAAqB,CAC/DlI,OAAQ,OACRC,KAAM,OACNC,MAAO,WACPC,YAAa,cACbC,QAAS,CACP,eAAgB,oBAElBC,SAAU,SACVC,eAAgB,cAChBU,KAAMC,KAAKC,UAAUL,KAEpBN,MAAK,SAACC,GACL,OAAOA,EAAII,UAEZL,MAAK,SAACC,GACL,IAAKA,EAAIW,QACP,MAAM,IAAIT,MAAM,SAAWF,EAAIY,SAEjC,OAAOZ,KApBiC,sFADnCyH,GAAU,SAwBDpH,GAA4C,OAAD,oHAChDd,MAAMzB,EAAWrG,EAAckQ,cAAe,CACzDnI,OAAQ,OACRC,KAAM,OACNC,MAAO,WACPC,YAAa,cACbC,QAAS,CACP,eAAgB,oBAElBC,SAAU,SACVC,eAAgB,cAChBU,KAAMC,KAAKC,UAAUL,KAEpBN,MAAK,SAACC,GACL,OAAOA,EAAII,UAEZL,MAAK,SAACC,GACL,IAAKA,EAAIW,QACP,MAAM,IAAIT,MAAM,SAAWF,EAAIY,SAEjC,OAAOZ,KApBkD,sFAxBpDyH,GAAU,SA+CFpH,GAA4B,OAAD,oHAC/Bd,MAAMzB,EAAWrG,EAAcmQ,aAAc,CACxDpI,OAAQ,OACRC,KAAM,OACNC,MAAO,WACPC,YAAa,cACbC,QAAS,CACP,eAAgB,oBAElBC,SAAU,SACVC,eAAgB,cAChBU,KAAMC,KAAKC,UAAUL,KAEpBN,MAAK,SAACC,GACL,OAAOA,EAAII,UAEZL,MAAK,SAACC,GACL,IAAKA,EAAIW,QACP,MAAM,IAAIT,MAAMF,EAAIY,SAEtB,OAAOZ,KApBiC,sFA/CnCyH,GAAU,SAsELpH,GAAyB,OAAD,oHACzBd,MAAMzB,EAAWrG,EAAcoQ,UAAW,CACrDrI,OAAQ,OACRC,KAAM,OACNC,MAAO,WACPC,YAAa,cACbC,QAAS,CACP,eAAgB,oBAElBC,SAAU,SACVC,eAAgB,cAChBU,KAAMC,KAAKC,UAAUL,KAEpBN,MAAK,SAACC,GACL,OAAOA,EAAII,UAEZL,MAAK,SAACC,GACL,IAAKA,EAAIW,QACP,MAAM,IAAIT,MAAM,SAAWF,EAAIY,SAEjC,OAAOZ,KApB2B,sFAtE7ByH,GAAU,SA8FJpH,GAA0B,OAAD,oHAC3Bd,MAAMzB,EAAWrG,EAAcqQ,WAAY,CACtDtI,OAAQ,OACRC,KAAM,OACNC,MAAO,WACPC,YAAa,cACbC,QAAS,CACP,eAAgB,oBAElBC,SAAU,SACVC,eAAgB,cAChBU,KAAMC,KAAKC,UAAUL,KAXiB,sFA9F/BoH,GAAU,SA6GHpH,GAA0B,OAAD,oHAC5Bd,MAAMzB,EAAWrG,EAAcsQ,YAAa,CACvDvI,OAAQ,OACRC,KAAM,OACNC,MAAO,WACPC,YAAa,cACbC,QAAS,CACP,eAAgB,oBAElBC,SAAU,SACVC,eAAgB,cAChBU,KAAMC,KAAKC,UAAUL,KAEpBN,MAAK,SAACC,GACL,OAAOA,EAAII,UAEZL,MAAK,SAACC,GACL,IAAKA,EAAIW,QAEP,MADA+B,QAAQC,IAAR,SACM,IAAIzC,MAAMF,EAAIY,SAEtB,OAAOZ,KArB8B,sFA7GhCyH,GAAU,WAqIA,OAAD,oHACLlI,MAAMzB,EAAWrG,EAAcuQ,KAAM,CAChDxI,OAAQ,MACRC,KAAM,OACNC,MAAO,WACPC,YAAa,cACbC,QAAS,CACP,eAAgB,mBAChBW,cAAevC,EAAU,UAE3B6B,SAAU,SACVC,eAAgB,gBAEfC,MAAK,SAACC,GACL,OAAOA,EAAII,UAEZL,MAAK,SAACC,GACL,IAAKA,EAAIW,QAEP,MADA+B,QAAQC,IAAR,SACM,IAAIzC,MAAMF,EAAIY,SAEtB,OAAOZ,KArBO,sFArITyH,GAAU,SA6JDpH,GAAyB,OAAD,oHAC7Bd,MAAMzB,EAAWrG,EAAcuQ,KAAM,CAChDxI,OAAQ,QACRC,KAAM,OACNC,MAAO,WACPC,YAAa,cACbC,QAAS,CACP,eAAgB,mBAChBW,cAAevC,EAAU,UAE3B6B,SAAU,SACVC,eAAgB,cAChBU,KAAMC,KAAKC,UAAUL,KAEpBN,MAAK,SAACC,GACL,OAAOA,EAAII,UAEZL,MAAK,SAACC,GACL,IAAKA,EAAIW,QACP,MAAM,IAAIT,MAAM,SAAWF,EAAIY,SAEjC,OAAOZ,KArB+B,sFCjIjC6H,GAAY/G,YACvB,iBADuC,uCAEvC,WAAOT,GAAP,eAAAW,EAAA,sEACuByG,GAAkBpH,GADzC,cACUhF,EADV,OAEImD,GAAU,QAASnD,EAAK4M,YAAa,CAAEtJ,QAAS,OAChDkH,aAAaqC,QAAQ,eAAgB7M,EAAKuK,cAH9C,kBAIWvK,GAJX,2CAFuC,uDAU5BuM,GAAe9G,YAG1B,oBAH0C,uCAGrB,WAAOT,GAAP,eAAAW,EAAA,sEAEAyG,GAAqBpH,GAFrB,cAEbhF,EAFa,OAGnBmD,GAAU,QAASnD,EAAK4M,YAAa,CAAEtJ,QAAS,OAChDkH,aAAaqC,QAAQ,eAAgB7M,EAAKuK,cAJvB,kBAKZvK,GALY,2CAHqB,uDAW/B8M,GAAYrH,YAGvB,iBAHuC,uCAGrB,WAAOT,GAAP,SAAAW,EAAA,sEACHyG,GAAsBpH,GADnB,mFAHqB,uDAM5B+H,GAAUtH,YAAiB,eAAD,sBAAiB,4BAAAE,EAAA,sEAClCyG,KADkC,cAC9CzH,EAD8C,yBAE7CA,GAF6C,4CAOlDqI,GAAYhH,YAAY,CAC5BtG,KAAM,OACNuG,aAJ0B,CAAEgH,SAAU,IAKtC1G,SAAU,CACR2G,YAAa,SAAC9O,EAAOwI,GACnBxI,EAAM6O,SAAWrG,EAAOC,UAG5BG,cAAe,SAACC,GACdA,EAAQC,QAAQsF,GAAUrF,WAAW,SAAC/I,EAAOwI,GACvCA,EAAOC,UACTzI,EAAM6O,SAAWrG,EAAOC,QAAQ8F,SAGpC1F,EAAQC,QAAQsF,GAAUpF,UAAU,SAAChJ,EAAOwI,GACtCA,EAAOC,SACXQ,QAAQC,IAAR,cAA2BV,EAAOC,YAGpCI,EAAQC,QAAQqF,GAAapF,WAAW,SAAC/I,EAAOwI,GAC1CA,EAAOC,UACTzI,EAAM6O,SAAWrG,EAAOC,QAAQ8F,SAGpC1F,EAAQC,QAAQqF,GAAanF,UAAU,SAAChJ,EAAOwI,GACzCA,EAAOC,SACXQ,QAAQC,IAAR,cAA2BV,EAAOC,YAGpCI,EAAQC,QAAQ4F,GAAU3F,WAAW,SAAC/I,EAAOwI,GAC3CxI,EAAM6O,SAAWrG,EAAOC,QAAQ8F,QAElC1F,EAAQC,QAAQ4F,GAAU1F,UAAU,SAAChJ,EAAOwI,GACtCA,EAAOC,SACXQ,QAAQC,IAAR,cAA2BV,EAAOC,YAGpCI,EAAQC,QAAQ6F,GAAQ5F,WAAW,SAAC/I,EAAOwI,GACrCA,EAAOC,UACTzI,EAAM6O,SAAWrG,EAAOC,QAAQ8F,SAGpC1F,EAAQC,QAAQ6F,GAAQ3F,UAAU,SAAChJ,EAAOwI,GACpCA,EAAOC,SACXQ,QAAQC,IAAR,cAA2BV,EAAOC,eAKzBqG,GAAgBF,GAAUzF,QAA1B2F,YAEAF,MAAf,QCFeG,GAvGD,WACV,IAAMrE,EAAWrL,IACXM,EAAUC,cACTI,EAASF,cAATE,MACP,EACeyB,IAAMgB,SAAS,CAACuM,MAAO,GAAIC,SAAU,KADpD,mBAAOrI,EAAP,KACIsI,EADJ,KAEM/C,EAAeC,aAAaC,QAAQ,gBAEpC8C,EAAWxM,iBAA6B,MAExCyM,EAAc,WAChBC,YAAW,WACHF,GAAYA,EAAShN,SACrBgN,EACKhN,QACAmN,UAEV,GACHC,MAAM,wBAGJC,EAAgB,SAACC,GACnBP,GAAQ,SAACQ,GACL,OAAO,6BACAA,GADP,mBAEKD,EAAEE,OAAOrO,KAAOmO,EAAEE,OAAO1N,YAKhC2N,EAAY,uCAAG,WAAMC,GAAN,SAAAtI,EAAA,6DACjBsI,EAAMC,iBADW,SAEXpF,EAAS0D,GAAUxH,IAFR,OAGjBjH,EAAQiF,QAAQ,CACZ9D,UAAe,OAALd,QAAK,IAALA,OAAA,EAAAA,EACJ+M,KAAKjM,WAAY,MALV,2CAAH,sDASlB,OAAIqL,EACQ,cAAC,IAAD,CACJ/N,GAAI,CACJ0C,UAAe,OAALd,QAAK,IAALA,OAAA,EAAAA,EACJ+M,KAAKjM,WAAY,OAK3B,sBAAKzC,UAAWM,KAAEC,KAAlB,UACI,mBAAGP,UAAU,kCAAb,sCAEA,uBAAMA,UAAWM,KAAEiI,KAAMmJ,SAAUH,EAAnC,UACI,sBACIvR,UAAW,OACXgE,MAAO,CACPmL,SAAU,KAHd,UAKI,cAAC,QAAD,CACItO,KAAM,QACN8Q,YAAa,SACbC,SAAUT,EACVvN,MAAO2E,EAAKoI,MACZ1N,KAAM,QACN4O,OAAO,EACP9P,IAAK+O,EACLC,YAAaA,EACbe,UAAW,uCACXjP,KAAM,YACV,cAAC,QAAD,CACIhC,KAAM,WACN8Q,YAAa,uCACbC,SAAUT,EACVtR,KAAM,WACN+D,MAAO2E,EAAKqI,SACZ3N,KAAM,WACN4O,OAAO,EACP9P,IAAK+O,EACLC,YAAaA,EACbe,UAAW,uCACXjP,KAAM,eAEd,cAAC,SAAD,CAAQhC,KAAK,UAAUgC,KAAK,SAA5B,+CAKJ,sBAAK7C,UAAW,QAAhB,UACI,oBAAGA,UAAU,kDAAb,yIAC6B,IACzB,cAAC,IAAD,CAAMD,GAAI,YAAaC,UAAW,kBAAlC,6HAIJ,oBAAGA,UAAU,kDAAb,uFACmB,IACf,cAAC,IAAD,CAAMD,GAAI,mBAAoBC,UAAW,kBAAzC,qI,oBCAL+R,GAnGqB,WAChC,IAAMzQ,EAAUC,cAChB,EACe6B,IAAMgB,SAAS,CAACnB,KAAM,GAAI0N,MAAO,GAAIC,SAAU,KAD9D,mBAAOrI,EAAP,KACIsI,EADJ,KAEMxE,EAAWrL,IACX8P,EAAW1N,IAAMkB,OAA6B,MAG9CyM,EAAc,WAChBC,YAAW,WACHF,GAAYA,EAAShN,SACrBgN,EACKhN,QACAmN,UAEV,GACHC,MAAM,wBAGJC,EAAgB,SAACC,GACnBP,GAAQ,SAACQ,GACL,OAAO,6BACAA,GADP,mBAEKD,EAAEE,OAAOrO,KAAOmO,EAAEE,OAAO1N,YAUtC,OA3BqBmK,aAAaC,QAAQ,gBA4B9B,cAAC,IAAD,CAAUjO,GAAI,CAClB0C,SAAU,OAKd,sBAAKzC,UAAWM,KAAEC,KAAlB,UACI,mBAAGP,UAAU,kCAAb,gFAEA,uBAAMA,UAAWM,KAAEiI,KAAMmJ,SAfZ,WACjBrF,EAASyD,GAAavH,IACtBjH,EAAQiF,QAAQ,CAAC9D,SAAU,OAavB,UACI,sBACIzC,UAAW,OACXgE,MAAO,CACPmL,SAAU,KAHd,UAKI,cAAC,QAAD,CACItO,KAAM,OACN8Q,YAAa,qBACbC,SAAUT,EACVvN,MAAO2E,EAAKtF,KACZA,KAAM,OACN4O,OAAO,EACP9P,IAAK+O,EACLC,YAAaA,EACbe,UAAW,uCACXjP,KAAM,YAAa,IACvB,cAAC,QAAD,CACIhC,KAAM,QACN8Q,YAAa,SACbC,SAAUT,EACVvN,MAAO2E,EAAKoI,MACZ1N,KAAM,QACN4O,OAAO,EACP9P,IAAK+O,EACLC,YAAaA,EACbe,UAAW,uCACXjP,KAAM,YACV,cAAC,QAAD,CACIhC,KAAM,WACN8Q,YAAa,uCACbC,SAAUT,EACVtR,KAAM,WACN+D,MAAO2E,EAAKqI,SACZ3N,KAAM,WACN4O,OAAO,EACP9P,IAAK+O,EACLC,YAAaA,EACbe,UAAW,uCACXjP,KAAM,eAEd,cAAC,SAAD,CAAQhC,KAAK,UAAUgC,KAAK,SAA5B,6HAIJ,qBAAK7C,UAAW,QAAhB,SACI,oBAAGA,UAAU,kDAAb,8GACsB,IAClB,cAAC,IAAD,CAAMD,GAAI,SAAUC,UAAW,kBAA/B,qD,oBCbLgS,GA5E6B,SAACrL,GAC3C,IAAMrF,EAAUC,cACVC,EAAWC,cACjB,EAA0B2B,IAAMgB,SAAS,IAAzC,mBAAOR,EAAP,KAAcqO,EAAd,KACMnB,EAAW1N,IAAMkB,OAAyB,MAE1CwJ,EAAeC,aAAaC,QAAQ,gBAWpCuD,EAAY,uCAAG,WAAOC,GAAP,SAAAtI,EAAA,6DACnBsI,EAAMC,iBADa,kBAGX9B,GAAuB,CAAEgB,MAAO/M,IAHrB,OAIjBtC,EAAQiF,QAAQ,CACd9D,SAAU,kBACVd,MAAO,CACL+M,KAAMlN,KAPO,gDAWjBoJ,QAAQC,IAAI,KAAI/B,SAXC,yDAAH,sDAelB,OAAIgF,EAEA,cAAC,IAAD,CACE/N,GAAI,CACF0C,SAAU,OAOhB,sBAAKzC,UAAWM,KAAEC,KAAlB,UACE,mBAAGP,UAAU,kCAAb,wIACA,uBAAMA,UAAWM,KAAEiI,KAAMmJ,SAAUH,EAAnC,UACE,qBAAKvR,UAAW,OAAQgE,MAAO,CAAEmL,SAAU,KAA3C,SACE,cAAC,QAAD,CACEtO,KAAM,QACN8Q,YAAa,oDACbC,SAAU,SAACR,GAAD,OAAOa,EAASb,EAAEE,OAAO1N,QACnCA,MAAOA,EACPX,KAAM,OACN4O,OAAO,EACP9P,IAAK+O,EACLC,YA/CU,WAClBC,YAAW,WACLF,GAAYA,EAAShN,SACvBgN,EAAShN,QAAQmN,UAElB,GACHC,MAAM,wBA0CEY,UAAW,uCACXjP,KAAM,cAGV,cAAC,SAAD,CAAQhC,KAAK,UAAUgC,KAAK,SAA5B,yFAKF,qBAAK7C,UAAW,QAAhB,SACE,oBAAGA,UAAU,kDAAb,yGACoB,IAClB,cAAC,IAAD,CAAMD,GAAI,SAAUC,UAAW,kBAA/B,qD,oBCaKkS,GArFU,WACrB,IAAM7F,EAAWrL,IACX8P,EAAW1N,IAAMkB,OAA6B,MAC7CkM,EAAYtP,GAAY,SAACS,GAAD,OAAWA,EAAMwQ,QAAzC3B,SAEP,EACepN,IAAMgB,SAAS,CAACnB,KAAMuN,EAASvN,KAAM0N,MAAOH,EAASG,MAAOC,SAAU,KADrF,mBAAOrI,EAAP,KACIsI,EADJ,KAGME,EAAc,WAChBC,YAAW,WACHF,GAAYA,EAAShN,SACrBgN,EACKhN,QACAmN,UAEV,GACHC,MAAM,wBAGJC,EAAgB,SAACC,GACnBP,GAAQ,SAACQ,GACL,OAAO,6BACAA,GADP,mBAEKD,EAAEE,OAAOrO,KAAOmO,EAAEE,OAAO1N,YAatC,OACI,uBAAM8N,SALW,SAACF,GAClBA,EAAMC,iBACNpF,EAASgE,GAAU9H,KAGnB,UACI,cAAC,QAAD,CACI1H,KAAM,OACN8Q,YAAa,qBACbC,SAAUT,EACVtR,KAAM,WACN+D,MAAO2E,EAAKtF,KACZA,KAAM,OACN4O,OAAO,EACP9P,IAAK+O,EACLC,YAAaA,EACbe,UAAW,uCACXjP,KAAM,YACV,cAAC,QAAD,CACIhC,KAAM,QACN8Q,YAAa,iCACbC,SAAUT,EACVtR,KAAM,WACN+D,MAAO2E,EAAKoI,MACZ1N,KAAM,QACN4O,OAAO,EACP9P,IAAK+O,EACLC,YAAaA,EACbe,UAAW,uCACXjP,KAAM,YACV,cAAC,QAAD,CACIhC,KAAM,WACN8Q,YAAa,uCACbC,SAAUT,EACVtR,KAAM,WACN+D,MAAO2E,EAAKqI,SACZ3N,KAAM,WACN4O,OAAO,EACP9P,IAAK+O,EACLC,YAAaA,EACbe,UAAW,uCACXjP,KAAM,YACV,sBAAK7C,UAAWK,kBAAKC,KAAE8R,WAAY,QAAnC,UACI,cAAC,SAAD,CAAQ7P,QA/CC,WACjBsO,EAAQ,CAAC5N,KAAMuN,EAASvN,KAAM0N,MAAOH,EAASG,MAAOC,SAAU,MA8CxB/P,KAAK,YAAYgC,KAAK,SAArD,kDAGA,cAAC,SAAD,CAAQhC,KAAK,UAAUgC,KAAK,SAA5B,2E,qBC9DDwP,GAb2B,SAAC,GAAgB,IAAfvS,EAAc,EAAdA,KAAMC,EAAQ,EAARA,GACxCE,EAAQC,YAAc,CAACC,KAAMJ,EAAIK,OAAO,IAE9C,OACI,cAAC,IAAD,CAAML,GAAIA,EAAIC,UAAWM,KAAEgS,KAA3B,SACI,mBACItS,UAAWK,kBAAK,mCAAoCJ,GAAS,uBADjE,SAEKH,O,oBCdJyS,GAAiB,SAC5B3Q,EACA4Q,GAEA,IAAInR,EACJ,IAAK,IAAIoR,KAAO7Q,EAAa,CAC3B,IAAKP,EAEHA,EADgCO,EAAY6Q,GACtBC,MAAK,SAAC5Q,GAAD,OAAUA,EAAKI,MAAQsQ,KAGtD,OAAOnR,G,8BCVIsR,GAAa,SAACC,GACzB,IAAMC,EAAQ,IAAI9L,KAEZ+L,EAAiBC,aAASH,GAE5BI,EAAWF,EAAeG,mBAAmB,QAAS,CACxDC,aAAc,UAGhBF,EAAWA,EAASG,MAAM,KAAK,GAE/B,ICfoCC,EDe9BtM,EAAIuM,aAAeP,EAAgBD,EAAO,CAC9CS,OAAQC,OAGV,OCnBoCH,EDmBPtM,EAAI,KAAOkM,GClB1BQ,OAAO,GAAGC,cAAgBL,EAAOM,MAAM,I,wCCa1CC,GAAiB,6CAgFfC,GA9EF,WACX,IAAMvH,EAAWrL,IACXM,EAAUC,cACVC,EAAWC,cAEjB,EAAsCP,GAAY,SAACS,GAAD,OAAWA,EAAMkS,SAA3DrL,EAAR,EAAQA,OAAQkB,EAAhB,EAAgBA,MAAOC,EAAvB,EAAuBA,WAEvBmK,qBAAU,WAER,OADAzH,EAASlD,GAAkBwK,KACpB,WACLtH,EAAShD,MACTgD,EAASrC,SAEV,CAACqC,IAEJ,IAAM0H,EAAc,SAACF,GACnBvS,EAAQkB,KAAK,CACXC,SAAU,SAAWoR,EAAMG,OAC3BrS,MAAO,CAAEe,WAAYlB,MAInByS,EAAazL,EAAOlG,QACxB,SAACR,EAAM4J,GAAP,MAAiC,SAAhB5J,EAAKuG,QAAqBqD,EAAQ,KAE/CwI,EAAgB1L,EAAOlG,QAC3B,SAACR,EAAM4J,GAAP,MAAiC,YAAhB5J,EAAKuG,QAAwBqD,EAAQ,KAExD,OACE,sBAAK1L,UAAWK,kBAAKC,KAAEC,KAAM,mBAA7B,UACE,mBAAGP,UAAU,uCAAb,uFACA,sBAAKA,UAAWM,KAAEK,QAAlB,UACE,qBAAKX,UAAWM,KAAE6T,gBAAlB,SACG3L,EAAO9E,KAAI,SAACmQ,EAAOnI,GAAR,OACV,cAAC,GAAD,CAAemI,MAAOA,EAAmBtR,QAASwR,GAAhBrI,QAGtC,sBAAK1L,UAAWK,kBAAKC,KAAE6T,gBAAiB,SAAxC,UACE,sBAAKnU,UAAWK,kBAAKC,KAAE+H,OAAQ,SAA/B,UACE,sBAAKrI,UAAWM,KAAE8T,eAAlB,UACE,mBAAGpU,UAAU,kCAAb,oDACA,qBAAKA,UAAWM,KAAE+T,aAAlB,SACGJ,EAAWvQ,KAAI,SAAC5B,EAAM4J,GAAP,OACd,mBAEE1L,UAAWK,kBACTC,KAAEgU,gBACF,sCAJJ,SAOGxS,EAAKkS,QANDtI,WAWb,sBAAK1L,UAAWM,KAAE8T,eAAlB,UACE,mBAAGpU,UAAU,kCAAb,0DACA,qBAAKA,UAAWM,KAAE+T,aAAlB,SACGH,EAAcxQ,KAAI,SAAC5B,EAAM4J,GAAP,OACjB,mBAEE1L,UAAWK,kBAAK,sCAFlB,SAIGyB,EAAKkS,QAHDtI,cASf,mBAAG1L,UAAU,6BAAb,oIACA,mBAAGA,UAAU,oCAAb,SAAkD0J,IAClD,mBAAG1J,UAAU,6BAAb,6HACA,mBAAGA,UAAU,8BAAb,SAA4C2J,e,SpBvE1C1D,K,+CAAAA,E,iEAAAA,E,yDAAAA,M,KAMZ,IA4GesO,GApGmB,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QAC7BnI,EAAWrL,IACTyT,EAAYC,cAAZD,QACAjM,EAAWtH,GAAY,SAACS,GAAD,OAAWA,EAAMkS,SAAxCrL,OACA5G,EAAgBV,GAAY,SAACS,GAAD,OAAWA,EAAMC,eAA7CA,YAEFiS,EAAQrL,EAAOkK,MAAK,SAAC5Q,GAAD,OAAUA,EAAKkS,UAAYS,KAkBrD,GAhBAX,qBAAU,WACR,KAAI,OAACD,QAAD,IAACA,OAAD,EAACA,EAAOG,QAAQ,CAElB,GAAIQ,EAAS,CAAC,IAAD,EACLrE,EAAW,UAAGjK,EAAU,gBAAb,aAAG,EAAoBiN,MAAM,KAAK,GACnD9G,EAASlD,GAAkBwL,GAAe,iBAAaxE,UAEvD9D,EAASlD,GAAkBwK,KAE7B,OAAO,WACLtH,EAAShD,MACTgD,EAASrC,UAGZ,CAACqC,MAEA,OAACwH,QAAD,IAACA,OAAD,EAACA,EAAOjS,aACV,OAAO,KAGT,IApCcoJ,EAoCR4J,GApCQ5J,EAoCkB,OAAC6I,QAAD,IAACA,OAAD,EAACA,EAAOjS,YAnCjCiT,MAAMnG,KAAK,IAAIoG,IAAI9J,KAqCpB+J,EAAalB,EAAMjS,YAAY0M,QAAO,SAACC,EAAKyG,GAChD,IAAM3T,EAAakR,GAAe3Q,EAAaoT,GAC/C,OAAI3T,EACKkN,EAAMlN,EAAW8B,MAEnBoL,IACN,GACH,OACE,qBAAKvO,UAAWM,KAAEC,KAAlB,SACE,gCACE,oBACEyD,MAAO,CAAEiR,UAAW,UACpBjV,UAAU,qCAFZ,qBAII6T,QAJJ,IAIIA,OAJJ,EAIIA,EAAOG,UAEX,mBAAGhU,UAAU,kCAAb,gBAAgD6T,QAAhD,IAAgDA,OAAhD,EAAgDA,EAAO5Q,OACvD,mBACEjD,UAAWK,kBACT,oCACiB,SAAjBwT,EAAMxL,QAAqB/H,KAAEgU,iBAHjC,SAMGrO,EAAe,OAAC4N,QAAD,IAACA,OAAD,EAACA,EAAOxL,UAG1B,mBAAGrI,UAAU,kCAAb,mDACA,qBAAKA,UAAWK,kBAAKC,KAAEsB,YAAa,cAApC,SACGgT,EAAkBlR,KAAI,SAAC5B,EAAM4J,GAC5B,IAAMrK,EAAakR,GAAe3Q,EAAaE,GACzCoT,EAAkBrB,EAAMjS,YAAYU,QACxC,SAACkM,GAAD,OAAUA,IAAS1M,KACnBO,OACF,OAAKhB,EAEH,sBAAKrB,UAAWK,kBAAKC,KAAE6U,kBAAmB,QAA1C,UACE,qBAAKnV,UAAWK,kBAAKC,KAAE8U,IAAK,QAA5B,SACE,qBAAiBtS,IAAKzB,EAAWoM,aAAczK,IAAKlB,GAA1C4J,KAEZ,oBACE1H,MAAO,CAAEqR,UAAW,OACpBrV,UAAU,8BAFZ,UAIGqB,EAAW4B,KAJd,UAMA,sBAAKjD,UAAWM,KAAEoJ,MAAlB,UACE,oBAAG1J,UAAU,qCAAb,UACGkV,EADH,YACiC7T,EAAW8B,SAE5C,cAAC,eAAD,CAActC,KAAK,iBAdiC6K,GAFlC,uBAAUA,QAsBtC,sBAAK1L,UAAWM,KAAEyM,OAAlB,WACQ,OAAL8G,QAAK,IAALA,OAAA,EAAAA,EAAOyB,YACN,mBAAGtV,UAAU,kDAAb,SACG2S,GAAU,OAACkB,QAAD,IAACA,OAAD,EAACA,EAAOyB,aAGvB,sBAAKtV,UAAWM,KAAEoJ,MAAlB,UACE,mBAAG1J,UAAU,qCAAb,SAAmD+U,IACnD,cAAC,eAAD,CAAclU,KAAK,wBqB9BhB0U,GA7E2B,SAAC,GAAwB,IAAtB1B,EAAqB,EAArBA,MAAOtR,EAAc,EAAdA,QAC5CiT,EAAc3B,EAAMjS,YAAYS,OAAS,EAEvCT,EAAgBV,GAAY,SAACS,GAAD,OAAWA,EAAMC,eAA7CA,YAEFmT,EAAalB,EAAMjS,YAAY0M,QAAO,SAACC,EAAKyG,GAChD,IAAM3T,EAAakR,GAAe3Q,EAAaoT,GAC/C,OAAI3T,EACKkN,EAAMlN,EAAW8B,MAEnBoL,IACN,GACH,OACE,sBAAKvO,UAAWK,kBAAKC,KAAEC,KAAM,WAAYgC,QAAO,8GAAE,kBAAMA,EAAQsR,MAAhE,UACE,sBAAK7T,UAAWM,KAAEmV,KAAlB,UACE,oBAAGzV,UAAU,gCAAb,cAA+C6T,EAAMG,UACrD,mBACEhU,UACE,4DAFJ,SAKG2S,GAAWkB,EAAMyB,gBAGtB,mBAAGtV,UAAU,uCAAb,SAAqD6T,EAAM5Q,QACrD,OAAL4Q,QAAK,IAALA,OAAA,EAAAA,EAAOxL,SACN,mBACErI,UAAWK,kBACT,oCACiB,SAAjBwT,EAAMxL,QAAqB/H,KAAEgU,iBAHjC,SAMGrO,EAAe,OAAC4N,QAAD,IAACA,OAAD,EAACA,EAAOxL,UAG5B,sBAAKrI,UAAWM,KAAEmV,KAAlB,UACE,qBAAKzV,UAAWK,kBAAKC,KAAEsB,YAAa,QAApC,SACGiS,EAAMjS,YAAY8B,KAAI,SAAC5B,EAAM4J,GAAW,IAAD,EAErB,EADjB,OAAIA,EAAQ,EAAU,uBAAUA,GAClB,IAAVA,EAEA,sBAAK1L,UAAWM,KAAE8U,IAAlB,UACE,qBAEEtS,IAAG,UAAEyP,GAAe3Q,EAAaE,UAA9B,aAAE,EAAmC2L,aACxCzK,IAAKlB,GAFA4J,GAIP,oBACE1L,UAAWK,kBACTC,KAAEoV,SACF,iCAHJ,cAMIF,OAZsB9J,GAkB9B,qBAAK1L,UAAWM,KAAE8U,IAAlB,SACE,qBAEEtS,IAAG,UAAEyP,GAAe3Q,EAAaE,UAA9B,aAAE,EAAmC2L,aACxCzK,IAAKlB,GAFA4J,IAFmBA,QAUlC,sBAAK1L,UAAWM,KAAEoJ,MAAlB,UACE,mBAAG1J,UAAU,qCAAb,SAAmD+U,IACnD,cAAC,eAAD,CAAclU,KAAK,sB,qBC1EhB8T,GAAkB,yCAuChBgB,GArCQ,WACrB,IAAMtJ,EAAWrL,IACXQ,EAAWC,cACXH,EAAUC,cAERiH,EAAWtH,GAAY,SAACS,GAAD,OAAWA,EAAMkS,SAAxCrL,OAERoC,QAAQC,IAAR,2BAAwCrC,GACxCsL,qBAAU,WAAO,IAAD,EACR3D,EAAW,UAAGjK,EAAU,gBAAb,aAAG,EAAoBiN,MAAM,KAAK,GAEnD,OADA9G,EAASlD,GAAkBwL,GAAe,iBAAaxE,KAChD,WACL9D,EAAShD,MACTgD,EAASrC,SAEV,CAACqC,IAEJ,IAAM0H,EAAc,SAACF,GACnBvS,EAAQkB,KAAK,CACXC,SAAU,mBAAqBoR,EAAMG,OACrCrS,MAAO,CAAEe,WAAYlB,MAIzB,OACE,qBAAKxB,UAAWM,KAAEC,KAAlB,SACGiI,EAAO9E,KAAI,SAACmQ,GAAD,OACV,cAAC,GAAD,CACExL,QAAQ,EACRwL,MAAOA,EAEPtR,QAASwR,GADJF,EAAMG,cCgBN4B,GAjDI,WACf,IAAMvJ,EAAWrL,IACXM,EAAUC,cAETpB,EAAQD,cAARC,KAED2N,EAAeC,aAAaC,QAAQ,gBAEpC6H,EAAe,uCAAG,sBAAA3M,EAAA,+EAEVyG,GAAmB,CAACmG,MAAOhI,IAFjB,OAIhBvG,GAAa,SACbwG,aAAagI,WAAW,gBACxB1J,EAASoE,GAAY,KACrBnP,EAAQiF,QAAQ,CAAC9D,SAAU,WAPX,gDAShBmI,QAAQC,IAAR,MATgB,yDAAH,qDAYrB,OACI,qBAAK7K,UAAWM,KAAEC,KAAlB,SACI,sBAAKP,UAAWK,kBAAKC,KAAEK,QAAS,SAAhC,UACI,sBACIqD,MAAO,CACPmL,SAAU,KAEVnP,UAAW,QAJf,UAKI,cAAC,GAAD,CAAaF,KAAK,6CAAUC,GAAG,aAC/B,cAAC,GAAD,CAAaD,KAAK,wFAAkBC,GAAG,oBAEvC,mBACIC,UAAWK,kBAAK,sDAAuDC,KAAE0V,MACzEzT,QAASsT,EAFb,+CAMJ,eAAC,IAAD,WACI,cAAC,IAAD,CAAOzV,OAAK,EAACD,KAAMA,EAAnB,SACI,cAAC,GAAD,MAEJ,cAAC,IAAD,CAAOC,OAAK,EAACD,KAAI,UAAKA,EAAL,WAAjB,SACI,cAAC,GAAD,e,qBCxBT8V,GAxBK,WAClB,IAAQrU,EAAgBV,GAAY,SAACS,GAAD,OAAWA,EAAMC,eAA7CA,YACAsU,EAAiBxB,cAAjBwB,aAEF7U,EAAakR,GAAe3Q,EAAasU,GAE/C,OACE,sBAAKlW,UAAWM,KAAEe,WAAlB,UACE,qBAAKyB,IAAG,OAAEzB,QAAF,IAAEA,OAAF,EAAEA,EAAY8U,YAAanT,IAAG,OAAE3B,QAAF,IAAEA,OAAF,EAAEA,EAAY4B,OACpD,mBACEe,MAAO,CAAEiR,UAAW,UACpBjV,UAAU,kCAFZ,gBAIGqB,QAJH,IAIGA,OAJH,EAIGA,EAAY4B,OAEf,mBACEe,MAAO,CAAEiR,UAAW,UACpBjV,UAAU,mCAFZ,iI,oBC8ESoW,GA7FW,WACtB,IAAM9U,EAAUC,cACTI,EAASF,cAATE,MACP,EACmByC,mBAAS,IAD5B,mBAAOwM,EAAP,KACIyF,EADJ,KAEA,EACejS,mBAAS,IADxB,mBAAOkS,EAAP,KACIC,EADJ,KAEMzF,EAAW1N,IAAMkB,OAA6B,MAC9CwJ,EAAeC,aAAaC,QAAQ,gBAEpC+C,EAAc,WAChBC,YAAW,WACHF,GAAYA,EAAShN,SACrBgN,EACKhN,QACAmN,UAEV,GACHC,MAAM,wBAGJK,EAAY,uCAAG,WAAMC,GAAN,SAAAtI,EAAA,6DACjBsI,EAAMC,iBADW,kBAGP9B,GAAsB,CAACiB,WAAUkF,MAAOQ,IAHjC,OAIbhV,EAAQiF,QAAQ,CAAC9D,SAAU,WAJd,gDAMbmI,QAAQC,IAAR,gBANa,yDAAH,sDAUlB,OAAIiD,EACQ,cAAC,IAAD,CAAU/N,GAAI,CAClB0C,SAAU,OAKM,sBADb,OAALd,QAAK,IAALA,OAAA,EAAAA,EACA+M,KAAKjM,UACC,cAAC,IAAD,CAAU1C,GAAI,CAClB0C,SAAU,YAId,sBAAKzC,UAAWM,KAAEC,KAAlB,UACI,mBAAGP,UAAU,kCAAb,uIAEA,uBAAMA,UAAWM,KAAEiI,KAAMmJ,SAAUH,EAAnC,UACI,sBACIvR,UAAW,OACXgE,MAAO,CACPmL,SAAU,KAHd,UAKI,cAAC,QAAD,CACItO,KAAM,WACN8Q,YAAa,iHACb9R,KAAM,WACN+R,SAAU,SAACR,GAAD,OAAOiF,EAAYjF,EAAEE,OAAO1N,QACtCA,MAAOgN,EACP3N,KAAM,OACN4O,OAAO,EACP9P,IAAK+O,EACLC,YAAaA,EACbe,UAAW,uCACXjP,KAAM,YAEV,cAAC,QAAD,CACIhC,KAAM,OACN8Q,YAAa,kHACbC,SAAU,SAACR,GAAD,OAAOmF,EAAQnF,EAAEE,OAAO1N,QAClCA,MAAO0S,EACPrT,KAAM,OACN4O,OAAO,EACP9P,IAAK+O,EACLC,YAAaA,EACbe,UAAW,uCACXjP,KAAM,eAEd,cAAC,SAAD,CAAQhC,KAAK,UAAUgC,KAAK,SAA5B,uEAIJ,qBAAK7C,UAAW,QAAhB,SACI,oBAAGA,UAAU,kDAAb,wGACqB,IACjB,cAAC,IAAD,CAAMD,GAAI,SAAUC,UAAW,kBAA/B,qD,oBCxELwW,GAfK,WAClB,OACE,qBAAKxW,UAAWM,KAAEmW,QAAlB,SACE,qBAAKzW,UAAWM,KAAEoW,UAAlB,SACE,sBAAK1W,UAAWM,KAAEK,QAAlB,UACE,uFACA,6JACA,uBACA,uBACA,yFAAc,cAAC,IAAD,CAAMZ,GAAG,IAAIC,UAAWK,kBAAKC,KAAEgS,MAA/B,wG,0BCoCTqE,GArCiC,SAAC,GAG1C,IAFHC,EAEE,EAFFA,SACGC,EACD,mBACIxK,EAAWrL,IACVwP,EAAYtP,GAAY,SAACS,GAAD,OAAWA,EAAMwQ,QAAzC3B,SACP,EACqBpM,oBAAS,GAD9B,mBAAO0S,EAAP,KACIC,EADJ,KAGMC,EAAI,uCAAG,sBAAA9N,EAAA,sEACHmD,EAASiE,MADN,OAETyG,GAAc,GAFL,2CAAH,qDASV,OAJAjD,qBAAU,WACNkD,MACD,IAEEF,EAKD,cAAC,IAAD,6BACQD,GADR,IAEII,OAAQ,gBAAEzV,EAAF,EAAEA,SAAF,OAAgBgP,EAASvN,MAAQuN,EAASG,MAC/CiG,EACA,cAAC,IAAD,CACC7W,GAAI,CACJ0C,SAAU,SACVd,MAAO,CACH+M,KAAMlN,UAZX,M,0CC7BT0V,GAAY9Q,SAAS+Q,eAAe,gBA+C3BC,GAzC6B,SAAC,GAAyB,IAAxBR,EAAuB,EAAvBA,SAAUS,EAAa,EAAbA,QAC9CC,EAAahT,iBAA2B,MAiC9C,OA/BAwP,qBAAU,WACN,IAAMyD,EAAYD,EAAWxT,QACvB0T,EAAmB,SAACC,GAClBA,EAAGnG,SAAWiG,GACdF,KAOR,OAHIC,GAAcC,GACdA,EAAUG,iBAAiB,QAASF,GAEjC,WACCF,GAAcC,GACdA,EAAUI,oBAAoB,QAASH,MAGhD,CAACH,IAEJvD,qBAAU,WACN,IAAM8D,EAAY,SAACH,GACA,WAAXA,EAAGhF,KACH4E,KAKR,OAFAQ,OAAOH,iBAAiB,UAAWE,GAE5B,WACHC,OAAOF,oBAAoB,UAAWC,MAE3C,CAACP,IAEGH,GACDY,IAASC,aACP,qBAAKhW,IAAKuV,EAAYtX,UAAWM,KAAE0X,QAAnC,SACCpB,IACGM,IACN,MC1BKe,GAXe,SAAC,GAAgC,IAA/BzU,EAA8B,EAA9BA,MAAOoT,EAAuB,EAAvBA,SAAUS,EAAa,EAAbA,QAC7C,OACI,cAAC,GAAD,CAAcA,QAASA,EAAvB,SACI,sBAAKrX,UAAWK,kBAAKC,KAAE4X,MAAO,2BAA9B,UACI,cAAC,YAAD,CAAWrX,KAAK,UAAU0B,QAAS8U,IACnC,oBAAIrX,UAAU,4BAAd,SAA2CwD,IAC1CoT,Q,oBCGFuB,GAfW,WACtB,IAAO1O,EAAavI,GAAY,SAACS,GAAD,OAAWA,EAAMkS,SAA1CpK,UACP,OACI,sBAAKzJ,UAAWM,KAAEuT,MAAlB,UACI,mBAAG7T,UAAU,8BAAb,SACKyJ,EAAUoK,OAASpK,EAAUoK,MAAMG,SAExC,mBAAGhU,UAAU,kCAAb,iIACA,mBAAGA,UAAU,8BAAb,qJACA,mBAAGA,UAAWK,kBAAKC,KAAE8X,UAAW,oCAAhC,gQCsJGC,GA1HC,WAAO,IAAD,EACdhM,EAAWrL,IACXQ,EAAWC,cACXH,EAAUC,cACVuM,EAAeC,aAAaC,QAAQ,gBAClCvE,EAAcvI,GAAY,SAACS,GAAD,OAAWA,EAAMkS,SAA3CpK,UAEF6O,EAAU,uCAAG,4BAAApP,EAAA,+EAEGyG,GAAoB,CACpCmG,MAAOhI,IAHM,QAET5F,EAFS,QAKPW,SACNnC,GAAU,QAASwB,EAAIiI,YAAa,CAAEtJ,QAAS,OAC/CkH,aAAaqC,QAAQ,eAAgBlI,EAAI4F,gBAEzCvG,GAAa,SACbwG,aAAagI,WAAW,iBAVX,gDAafnL,QAAQC,IAAR,MAbe,yDAAH,qDAiBhBiJ,qBAAU,WACRzH,EAASjB,MACTkN,MACC,CAACjM,IAEJ,IAaM3J,EACe,SAAnBpB,EAAQ6I,QAAqB3I,EAASG,OAASH,EAASG,MAAMe,WAEhE,OACE,sBAAK1C,UAAWM,IAAE+X,IAAlB,UACE,cAAC,EAAD,IACA,sBAAKrY,UAAU,kBAAf,UACE,eAAC,IAAD,CAAQwB,SAAUkB,GAAclB,EAAhC,UACE,cAAC,IAAD,CAAOpB,OAAK,EAACD,KAAM,SAAnB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOC,OAAK,EAACD,KAAM,IAAnB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOC,OAAK,EAACD,KAAM,mBAAnB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOC,OAAK,EAACD,KAAM,YAAnB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOC,OAAK,EAACD,KAAM,mBAAnB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOC,OAAK,EAACD,KAAM,kBAAnB,SACE,cAAC,GAAD,MAEF,cAAC,GAAD,CAAgBC,OAAK,EAACD,KAAM,2BAA5B,SACE,cAAC,GAAD,CAAWqU,SAAS,MAEtB,cAAC,GAAD,CAAgBrU,KAAM,WAAtB,SACE,cAAC,GAAD,MAGF,cAAC,IAAD,CAAOC,OAAK,EAACD,KAAM,6BAAnB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOC,OAAK,EAACD,KAAM,QAAnB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOC,OAAK,EAACD,KAAM,iBAAnB,SACE,cAAC,GAAD,MAGF,cAAC,IAAD,UACE,cAAC,GAAD,SAGHuC,GACC,qCACE,cAAC,IAAD,CAAOvC,KAAM,6BAAb,SACE,cAAC,GAAD,CACEqD,MAAO,0GACP6T,QAjEgB,WAC5B/V,EAAQiF,QAAQ,CAAE9D,SAAU,OA8DlB,SAIE,cAAC,GAAD,QAGJ,cAAC,IAAD,CAAOrC,OAAK,EAACD,KAAM,iBAAnB,SACE,cAAC,GAAD,CAAOkX,QAhEU,WAC3B/V,EAAQiF,QAAQ,CAAE9D,SAAU,WA+DlB,SACE,cAAC,GAAD,QAGJ,cAAC,IAAD,CAAOrC,OAAK,EAACD,KAAM,2BAAnB,SACE,cAAC,GAAD,CAAOkX,QAlEa,WAC9B/V,EAAQiF,QAAQ,CAAE9D,SAAU,qBAiElB,SACE,cAAC,GAAD,YAME,OAATgH,QAAS,IAATA,GAAA,UAAAA,EAAWoK,aAAX,eAAkBG,SACjB,cAAC,GAAD,CAAOqD,QAjFU,WACvBhL,EAAStC,OAgFH,SACE,cAAC,GAAD,aC9IGwO,GAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqBxQ,MAAK,YAAkD,IAA/CyQ,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCQCO,GAXDC,YAAe,CAC3BC,QAAS,CACPrX,YAAasX,GACbrF,MAAOsF,GACPhH,KAAMiH,IAERC,WAAY,SAACC,GAAD,OACVA,IAAuBC,QCFlB,YAAkC,IAA/BlN,EAA8B,EAA9BA,SACJmN,EAA2B,KAE/B,OAAO,SAACC,GAAD,OAAkC,SAACtP,GAAuB,IAAD,EACtDtJ,EAAkBsJ,EAAlBtJ,KAAMuJ,EAAYD,EAAZC,QAEVvJ,IAASsI,GAAkBuQ,aAC7BF,EAAS,IAAIG,UAAUvP,IACrBvJ,IAASwI,GAAkBqQ,aAAkB,QAAN,EAAAF,SAAA,SAAQI,SAE/CJ,IACFA,EAAOK,OAAS,kBAAMxN,EAASpC,OAC/BuP,EAAOM,QAAU,kBAAMzN,EAAS/B,OAChCkP,EAAOO,QAAU,SAACvI,GAChBnF,EAAShC,GAAWmH,KAEtBgI,EAAOQ,UAAY,SAACxI,GAAD,OACjBnF,EAASnC,GAAavB,KAAKsR,MAAMzI,EAAMjO,UAG3CkW,EAAKtP,SDjBT+P,UAAU,IELZpC,IAASb,OACL,cAAC,IAAMkD,WAAP,UACA,cAAC,IAAD,CAAUpB,MAAOA,GAAjB,SACI,cAAC,IAAD,UACI,cAAC,GAAD,UAGS3S,SAAS+Q,eAAe,SAE7CoB,M,mBCjBA9Y,EAAOC,QAAU,CAAC,KAAO,gCAAgC,KAAO,gCAAgC,qBAAuB,gDAAgD,KAAO,gCAAgC,YAAc,uCAAuC,eAAiB,0CAA0C,MAAQ,iCAAiC,MAAQ,iCAAiC,OAAS,kCAAkC,yBAAyB,oD,mBCApdD,EAAOC,QAAU,CAAC,KAAO,mBAAmB,QAAU,sBAAsB,gBAAkB,8BAA8B,OAAS,qBAAqB,eAAiB,6BAA6B,aAAe,2BAA2B,gBAAkB,gC,mBCApQD,EAAOC,QAAU,CAAC,KAAO,4BAA4B,KAAO,4BAA4B,MAAQ,6BAA6B,YAAc,mCAAmC,IAAM,2BAA2B,SAAW,gCAAgC,gBAAkB,yC,mBCA5QD,EAAOC,QAAU,CAAC,KAAO,wBAAwB,OAAS,0BAA0B,MAAQ,yBAAyB,IAAM,uBAAuB,YAAc,+BAA+B,kBAAoB,qCAAqC,gBAAkB,qC,mBCA1QD,EAAOC,QAAU,CAAC,KAAO,sBAAsB,QAAU,yBAAyB,WAAa,4BAA4B,KAAO,wB,mBCAlID,EAAOC,QAAU,CAAC,OAAS,0BAA0B,QAAU,2BAA2B,KAAO,wBAAwB,WAAa,8BAA8B,QAAU,6B,mBCA9KD,EAAOC,QAAU,CAAC,QAAU,0BAA0B,UAAY,4BAA4B,QAAU,0BAA0B,KAAO,yB,mBCAzID,EAAOC,QAAU,CAAC,KAAO,mBAAmB,gBAAkB,8BAA8B,KAAO,qB,mBCAnGD,EAAOC,QAAU,CAAC,KAAO,4BAA4B,SAAW,kC,mBCAhED,EAAOC,QAAU,CAAC,KAAO,gCAAgC,gBAAkB,6C,mBCA3ED,EAAOC,QAAU,CAAC,KAAO,oCAAoC,SAAW,0C,mBCAxED,EAAOC,QAAU,CAAC,YAAc,gDAAgD,KAAO,2C,mBCAvFD,EAAOC,QAAU,CAAC,KAAO,oBAAoB,KAAO,sB,mBCApDD,EAAOC,QAAU,CAAC,KAAO,uBAAuB,KAAO,yB,mBCAvDD,EAAOC,QAAU,CAAC,KAAO,6BAA6B,KAAO,+B,mBCA7DD,EAAOC,QAAU,CAAC,KAAO,4BAA4B,KAAO,8B,mBCA5DD,EAAOC,QAAU,CAAC,MAAQ,4BAA4B,UAAY,mC","file":"static/js/main.500d07ae.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__Xd7Ki\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"ProfileLink_link__DFS2R\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"ProfileHistory_root__36VzE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient\":\"Ingredients_ingredient__1KvpN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"Modal_modal__2Pdj3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"ModalOverlay_overlay__rNbJ_\"};","export enum EnumEndpoints {\r\n    forgotResetPassword = \"/api/password-reset\",\r\n    resetPassword = \"/api/password-reset/reset\",\r\n    registerUser = \"/api/auth/register\",\r\n    loginUser = \"/api/auth/login \",\r\n    logoutUser = \"/api/auth/logout\",\r\n    updateToken = \"/api/auth/token\",\r\n    ingredients = \"/api/ingredients\",\r\n    user = \"/api/auth/user\",\r\n    orders = \"/api/orders\"\r\n}\r\n","import React, {FC} from \"react\";\r\nimport s from \"./AppHeaderItem.module.scss\";\r\nimport clsx from \"clsx\";\r\nimport {Link, useRouteMatch} from \"react-router-dom\";\r\n\r\ninterface IAppHeaderItem {\r\n    icon : JSX.Element;\r\n    text : string;\r\n    to : string;\r\n    className?: string;\r\n}\r\n\r\nconst AppHeaderItem : FC < IAppHeaderItem > = ({icon, text, to, className}) => {\r\n    const match = useRouteMatch({\r\n        path: to,\r\n        exact: to === \"\"\r\n    });\r\n\r\n    return (\r\n        <Link to={to} className={clsx(s.root, className, match && s.selected, \"p-2\")}>\r\n            {icon}\r\n            <p className={clsx(\"ml-1\", \"text_type_main-default\")}>{text}</p>\r\n        </Link>\r\n    );\r\n};\r\nexport default AppHeaderItem;\r\n","import React, {FC} from \"react\";\r\nimport {BurgerIcon, ListIcon, Logo, ProfileIcon} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nimport s from \"./AppHeader.module.scss\";\r\nimport AppHeaderItem from \"./AppHeaderItem/AppHeaderItem\";\r\nimport clsx from \"clsx\";\r\n\r\ninterface IAppHeader {\r\n    className?: string;\r\n}\r\n\r\nconst AppHeader : FC < IAppHeader > = ({className}) => {\r\n    return (\r\n        <header className={clsx(s.header, className)}>\r\n            <div className={clsx(s.content, \"content-wrapper\")}>\r\n                <nav className={s.navigation}>\r\n                    <AppHeaderItem\r\n                        text={\"Конструктор\"}\r\n                        icon={< BurgerIcon type = \"primary\" />}\r\n                        to={\"\"}/>\r\n                    <AppHeaderItem\r\n                        text={\"Лента заказов\"}\r\n                        icon={< ListIcon type = \"primary\" />}\r\n                        to={\"/feed\"}/>\r\n                    <AppHeaderItem\r\n                        className={s.flexEnd}\r\n                        text={\"Личный кабинет\"}\r\n                        icon={< ProfileIcon type = \"primary\" />}\r\n                        to={\"/profile\"}/>\r\n                </nav>\r\n                <div className={s.logo}>\r\n                    <Link to={\"/\"}>\r\n                        <Logo/>\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        </header>\r\n    );\r\n};\r\nexport default AppHeader;\r\n","import {TypedUseSelectorHook, useDispatch as dispatchHook, useSelector as selectorHook} from \"react-redux\";\r\nimport {AppDispatch, TRootState} from \"../store\";\r\n\r\nexport const useDispatch = () => dispatchHook < AppDispatch > ();\r\nexport const useSelector : TypedUseSelectorHook < TRootState > = selectorHook;\r\n","import React, {FC} from \"react\";\r\nimport {CurrencyIcon} from \"@ya.praktikum/react-developer-burger-ui-components/dist/ui/icons/currency-icon\";\r\nimport s from \"./burgerIngredientsCard.module.scss\";\r\nimport {Counter} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport {TIngredient} from \"../../../services/store/ingredients/ingredientsSlice\";\r\nimport {useDrag} from \"react-dnd\";\r\nimport {useHistory, useLocation} from \"react-router-dom\";\r\nimport {useSelector} from \"../../../services/hooks\";\r\n\r\ninterface IBurgerIngredientsCard {\r\n    ingredient : TIngredient;\r\n}\r\n\r\nconst BurgerIngredientsCard : FC < IBurgerIngredientsCard > = ({ingredient}) => {\r\n    const history = useHistory();\r\n\r\n    const location = useLocation();\r\n    const {selectedIngredients} = useSelector((state) => state.ingredients);\r\n\r\n    const [,\r\n        ref] = useDrag({type: \"ingredients\", item: ingredient});\r\n\r\n    const handleClickOpen = () => {\r\n        history.push({\r\n            pathname: \"/ingredients/\" + ingredient._id,\r\n            state: {\r\n                background: location\r\n            }\r\n        });\r\n    };\r\n\r\n    let countBun = selectedIngredients.bun && selectedIngredients.bun._id === ingredient._id && 2;\r\n    let countOther = selectedIngredients.other.length && selectedIngredients\r\n        .other\r\n        .filter((item) => item._id === ingredient._id)\r\n        .length;\r\n    return ( <> <div ref={ref} onClick={handleClickOpen} className={s.card}>\r\n        {ingredient.type === \"bun\"\r\n            ? !!countBun && <Counter count={countBun} size=\"small\"/>\r\n            : !!countOther && <Counter count={countOther} size=\"small\"/>}\r\n\r\n        <img src={ingredient.image} alt={ingredient.name}/>\r\n        <div className={s.priceRow}>\r\n            <p className=\"m-1 text_type_digits-default\">{ingredient.price}</p>\r\n            <CurrencyIcon type=\"primary\"/>\r\n        </div>\r\n        <p className=\"m-1 text_type_main-default\">{ingredient.name}</p>\r\n    </div> </>\r\n  );\r\n};\r\nexport default React.memo(BurgerIngredientsCard);","import React, {FC, RefObject} from \"react\";\r\nimport BurgerIngredientsCard from \"../BurgerIngredientsCard/BurgerIngredientsCard\";\r\nimport clsx from \"clsx\";\r\nimport s from \"./burgerIngredientsContainer.module.scss\";\r\nimport {TIngredient} from \"../../../services/store/ingredients/ingredientsSlice\";\r\n\r\nexport interface IBurgerIngredientsContainer {\r\n    data : TIngredient[];\r\n    title : string;\r\n    customRef : RefObject < HTMLDivElement >;\r\n}\r\n\r\nconst BurgerIngredientsContainer : FC < IBurgerIngredientsContainer > = ({data, title, customRef}) => {\r\n    return ( <> <h3 ref={customRef} className={clsx(s.text, \"ml-1\")}>\r\n        {title}\r\n    </h3> < div className = {\r\n        s.ingredients\r\n    } > {\r\n        data.map((item) => (<BurgerIngredientsCard key={item._id} ingredient={item}/>))\r\n    } </div>\r\n    </>);\r\n};\r\nexport default React.memo(BurgerIngredientsContainer);\r\n","import React from \"react\";\r\nimport { Tab } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nconst TABS = [\r\n  {\r\n    value: \"bun\",\r\n    name: \"Булки\",\r\n  },\r\n  {\r\n    value: \"sauce\",\r\n    name: \"Соусы\",\r\n  },\r\n  {\r\n    value: \"main\",\r\n    name: \"Начинки\",\r\n  },\r\n];\r\n\r\nconst Tabs = ({ current, setCurrent }) => {\r\n  return (\r\n    <div style={{ display: \"flex\" }}>\r\n      {TABS.map(({ value, name }) => (\r\n        <Tab\r\n          key={value}\r\n          value={value}\r\n          active={current === value}\r\n          onClick={() => setCurrent(value)}\r\n        >\r\n          {name}\r\n        </Tab>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\nexport default Tabs;\r\n","import React, { FC, useCallback, useRef } from \"react\";\r\nimport s from \"./burgerIngredients.module.scss\";\r\nimport BurgerIngredientsContainer from \"./BurgerIngredientsContainer/BurgerIngredientsContainer\";\r\nimport Tabs from \"../Tabs/Tabs\";\r\nimport { useSelector } from \"../../services/hooks\";\r\n\r\ninterface IBurgerIngredients {}\r\n\r\nconst BurgerIngredients: FC<IBurgerIngredients> = () => {\r\n  const [current, setCurrent] = React.useState(\"bun\");\r\n\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const bunRef = useRef<HTMLDivElement>(null);\r\n  const mainRef = useRef<HTMLDivElement>(null);\r\n  const sauceRef = useRef<HTMLDivElement>(null);\r\n\r\n  const { ingredients } = useSelector((state) => state.ingredients);\r\n\r\n  const handleClickTab = useCallback((item) => {\r\n    setCurrent(item);\r\n  }, []);\r\n\r\n  const handleScroll = () => {\r\n    let bunPos: number = 0;\r\n    let mainPos: number = 0;\r\n    let saucePos: number = 0;\r\n    let containerPos: number = 0;\r\n\r\n    if (containerRef && containerRef.current) {\r\n      containerPos = Math.trunc(\r\n        containerRef.current.getBoundingClientRect().top\r\n      );\r\n    }\r\n    if (bunRef && bunRef.current) {\r\n      bunPos = Math.trunc(bunRef.current.getBoundingClientRect().top);\r\n    }\r\n    if (mainRef && mainRef.current) {\r\n      mainPos = Math.trunc(mainRef.current.getBoundingClientRect().top);\r\n    }\r\n    if (sauceRef && sauceRef.current) {\r\n      saucePos = Math.trunc(sauceRef.current.getBoundingClientRect().top);\r\n    }\r\n    let initValue = [\r\n      {\r\n        value: \"bun\",\r\n        pos: bunPos,\r\n      },\r\n      { value: \"sauce\", pos: saucePos },\r\n      {\r\n        value: \"main\",\r\n        pos: mainPos,\r\n      },\r\n    ];\r\n    const checkPos = (\r\n      initValue: { value: string; pos: number }[],\r\n      containerPos: number\r\n    ) => {\r\n      let minCount: {\r\n        value: string;\r\n        min: number;\r\n      } = {\r\n        value: \"\",\r\n        min: 999999,\r\n      };\r\n\r\n      initValue.forEach((item) => {\r\n        if (minCount.min) {\r\n          const minRes = Math.abs(containerPos - item.pos);\r\n\r\n          if (minRes < minCount.min) {\r\n            minCount = {\r\n              value: item.value,\r\n              min: minRes,\r\n            };\r\n          }\r\n        }\r\n      });\r\n\r\n      return minCount.value;\r\n    };\r\n    setCurrent(checkPos(initValue, containerPos));\r\n  };\r\n\r\n  return (\r\n    <div className={s.root}>\r\n      <Tabs current={current} setCurrent={handleClickTab} />\r\n      <div\r\n        onScroll={handleScroll}\r\n        ref={containerRef}\r\n        className={s.ingredientsList}\r\n      >\r\n        <BurgerIngredientsContainer\r\n          customRef={bunRef}\r\n          title=\"Булки\"\r\n          data={ingredients.bun}\r\n        />\r\n        <BurgerIngredientsContainer\r\n          customRef={sauceRef}\r\n          title=\"Соусы\"\r\n          data={ingredients.sauce}\r\n        />\r\n        <BurgerIngredientsContainer\r\n          customRef={mainRef}\r\n          title=\"Начинки\"\r\n          data={ingredients.main}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BurgerIngredients;\r\n","export const BASE_URL = \"https://norma.nomoreparties.space\";\r\n","export const getCookie = (name: string) => {\r\n  const matches = document.cookie.match(\r\n    new RegExp(\r\n      \"(?:^|; )\" + name.replace(/([.$?*|{}()[\\]\\\\/+^])/g, \"\\\\$1\") + \"=([^;]*)\"\r\n    )\r\n  );\r\n  return matches ? decodeURIComponent(matches[1]) : undefined;\r\n};\r\n\r\nexport const setCookie = (name: string, value: string, props?: any): void => {\r\n  props = props || {};\r\n  let exp = props.expires;\r\n  if (typeof exp == \"number\" && exp) {\r\n    const d = new Date();\r\n    d.setTime(d.getTime() + exp * 1000);\r\n    exp = props.expires = d;\r\n  }\r\n  if (exp && exp.toUTCString) {\r\n    props.expires = exp.toUTCString();\r\n  }\r\n  value = encodeURIComponent(value);\r\n  let updatedCookie = name + \"=\" + value;\r\n\r\n  for (const propName in props) {\r\n    updatedCookie += \"; \" + propName;\r\n    const propValue = props[propName];\r\n    if (propValue !== true) {\r\n      updatedCookie += \"=\" + propValue;\r\n    }\r\n  }\r\n  document.cookie = updatedCookie;\r\n};\r\n\r\nexport const deleteCookie = (name: string): void => {\r\n  setCookie(name, \"\", { expires: -1 });\r\n};\r\n","import React, { FC, useEffect } from \"react\";\r\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport s from \"./FeedOrder.module.scss\";\r\nimport clsx from \"clsx\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { findIngredient } from \"../../../services/utils/findIngredient\";\r\nimport {\r\n  cleanOrders,\r\n  wsConnectionClose,\r\n  wsConnectionStart,\r\n} from \"../../../services/store/order/orderSlice\";\r\nimport { ALL_ORDERS_URL } from \"../Feed\";\r\nimport { formatDate } from \"../../../services/utils/formatDate\";\r\nimport { getCookie } from \"../../../services/utils/cookie\";\r\nimport { USER_ORDERS_URL } from \"../../Profile/ProfileHistory/ProfileHistory\";\r\nimport { useDispatch, useSelector } from \"../../../services/hooks\";\r\n\r\nexport enum enumStatusOrder {\r\n  created = \"Создан\",\r\n  pending = \"Готовится\",\r\n  done = \"Выполнен\",\r\n}\r\n\r\nconst unique = (arr: string[]) => {\r\n  return Array.from(new Set(arr));\r\n};\r\n\r\ninterface IFeedOrder {\r\n  profile?: boolean;\r\n}\r\n\r\nconst FeedOrder: FC<IFeedOrder> = ({ profile }) => {\r\n  const dispatch = useDispatch();\r\n  const { orderId } = useParams<{ orderId: string }>();\r\n  const { orders } = useSelector((state) => state.order);\r\n  const { ingredients } = useSelector((state) => state.ingredients);\r\n\r\n  const order = orders.find((item) => item.number === +orderId);\r\n\r\n  useEffect(() => {\r\n    if (!order?.number) {\r\n\r\n      if (profile) {\r\n        const accessToken = getCookie(\"token\")?.split(\" \")[1];\r\n        dispatch(wsConnectionStart(USER_ORDERS_URL + `?token=${accessToken}`));\r\n      } else {\r\n        dispatch(wsConnectionStart(ALL_ORDERS_URL));\r\n      }\r\n      return () => {\r\n        dispatch(wsConnectionClose());\r\n        dispatch(cleanOrders());\r\n      };\r\n    }\r\n  }, [dispatch]);\r\n\r\n  if (!order?.ingredients) {\r\n    return null;\r\n  }\r\n\r\n  const uniqueIngredients = unique(order?.ingredients);\r\n\r\n  const orderPrice = order.ingredients.reduce((acc, curValue) => {\r\n    const ingredient = findIngredient(ingredients, curValue);\r\n    if (ingredient) {\r\n      return acc + ingredient.price;\r\n    }\r\n    return acc;\r\n  }, 0);\r\n  return (\r\n    <div className={s.root}>\r\n      <div>\r\n        <p\r\n          style={{ textAlign: \"center\" }}\r\n          className=\"text text_type_digits-default mb-6\"\r\n        >\r\n          #{order?.number}\r\n        </p>\r\n        <p className=\"text text_type_main-medium mb-2\">{order?.name}</p>\r\n        <p\r\n          className={clsx(\r\n            \"text text_type_main-default mb-10\",\r\n            order.status === \"done\" && s.text_color_bold\r\n          )}\r\n        >\r\n          {enumStatusOrder[order?.status as keyof object]}\r\n        </p>\r\n\r\n        <p className=\"text text_type_main-medium mb-6\">Состав:</p>\r\n        <div className={clsx(s.ingredients, \"mb-10 pr-4\")}>\r\n          {uniqueIngredients.map((item, index) => {\r\n            const ingredient = findIngredient(ingredients, item);\r\n            const countIngredient = order.ingredients.filter(\r\n              (elem) => elem === item\r\n            ).length;\r\n            if (!ingredient) return <div key={index} />;\r\n            return (\r\n              <div className={clsx(s.ingredients__item, \"mb-4\")} key={index}>\r\n                <div className={clsx(s.img, \"mr-4\")}>\r\n                  <img key={index} src={ingredient.image_mobile} alt={item} />\r\n                </div>\r\n                <p\r\n                  style={{ flexBasis: \"80%\" }}\r\n                  className=\"text text_type_main-default\"\r\n                >\r\n                  {ingredient.name}&nbsp;\r\n                </p>\r\n                <div className={s.total}>\r\n                  <p className=\"text text_type_digits-default mr-1\">\r\n                    {countIngredient}&nbsp;x&nbsp;{ingredient.price}\r\n                  </p>\r\n                  <CurrencyIcon type=\"primary\" />\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n        <div className={s.bottom}>\r\n          {order?.createdAt && (\r\n            <p className=\"text text_type_main-default text_color_inactive\">\r\n              {formatDate(order?.createdAt)}\r\n            </p>\r\n          )}\r\n          <div className={s.total}>\r\n            <p className=\"text text_type_digits-default mr-1\">{orderPrice}</p>\r\n            <CurrencyIcon type=\"primary\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default FeedOrder;\r\n","import {BASE_URL} from \"./index\";\r\nimport {EnumEndpoints} from \"./enumEndpoints\";\r\nimport {getCookie} from \"../utils/cookie\";\r\n\r\nexport const constructorAPI = {\r\n    async getIngredients() {\r\n        return await fetch(BASE_URL + EnumEndpoints.ingredients, {\r\n            method: \"GET\",\r\n            mode: \"cors\",\r\n            cache: \"no-cache\",\r\n            credentials: \"same-origin\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            redirect: \"follow\",\r\n            referrerPolicy: \"no-referrer\"\r\n        }).then((res) => {\r\n            if (!res.ok) {\r\n                throw new Error(\"Code\" + res.status);\r\n            }\r\n            return res.json();\r\n        }).then(({data}) => data);\r\n    },\r\n    async postOrder(form : {\r\n        ingredients: string[]\r\n    }) {\r\n        return await fetch(BASE_URL + EnumEndpoints.orders, {\r\n            method: \"POST\",\r\n            mode: \"cors\",\r\n            cache: \"no-cache\",\r\n            credentials: \"same-origin\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: getCookie(\"token\") as string\r\n            },\r\n            redirect: \"follow\",\r\n            referrerPolicy: \"no-referrer\",\r\n            body: JSON.stringify(form)\r\n        }).then((res) => {\r\n            return res.json();\r\n        }).then((res) => {\r\n            if (!res.success) {\r\n                throw new Error(res.message);\r\n            }\r\n            return res;\r\n        });\r\n    }\r\n};\r\n","import { createAction, createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport { constructorAPI } from \"../../api/constructor\";\r\nimport { TIngredient } from \"../ingredients/ingredientsSlice\";\r\n\r\nexport type TOrderMade = {\r\n  name: string;\r\n  order: TOrder;\r\n  success: boolean;\r\n};\r\n\r\nexport type TOrder = {\r\n  createdAt: string;\r\n  ingredients: TIngredient[];\r\n  name: string;\r\n  number: number;\r\n  owner: { name: string; email: string; createdAt: string; updatedAt: string };\r\n  price: number;\r\n  status: string;\r\n  updatedAt: string;\r\n};\r\n\r\nexport type TWSOrder = {\r\n  _id: string;\r\n  createdAt: string;\r\n  ingredients: string[];\r\n  name: string;\r\n  number: number;\r\n  status: string;\r\n  updatedAt: string;\r\n};\r\n\r\nexport interface IOrderState {\r\n  orderMade: TOrderMade;\r\n  orders: TWSOrder[];\r\n  total: number;\r\n  totalToday: number;\r\n  wsConnected: boolean;\r\n  wsError: null | string;\r\n}\r\n\r\nexport const postOrder = createAsyncThunk(\r\n  \"order/postOrder\",\r\n  async (idArray: string[]) => {\r\n      return await constructorAPI.postOrder({ ingredients: idArray });\r\n  }\r\n);\r\n\r\nexport const wsConnectionStart = createAction<string>(\r\n  \"order/wsConnectionStart\"\r\n);\r\nexport const wsConnectionClose = createAction(\"order/wsConnectionClose\");\r\n\r\nexport const initialState = {\r\n  orderMade: {} as TOrderMade,\r\n  orders: [] as TWSOrder[],\r\n  total: 0,\r\n  totalToday: 0,\r\n  wsConnected: false,\r\n  wsError: null,\r\n};\r\n\r\nexport const orderSlice = createSlice({\r\n  name: \"order\",\r\n  initialState: initialState as IOrderState,\r\n  reducers: {\r\n    cleanOrderMade: (state) => {\r\n      state.orderMade = {} as TOrderMade;\r\n    },\r\n    cleanOrders: (state) => {\r\n      state.orders = [] as TWSOrder[];\r\n    },\r\n    wsConnectionOpened: (state) => {\r\n      state.wsConnected = true;\r\n      state.wsError = null;\r\n    },\r\n    wsGotMessage: (state, action) => {\r\n      const { orders, total, totalToday } = action.payload;\r\n      state.orders = orders;\r\n      state.total = total;\r\n      state.totalToday = totalToday;\r\n    },\r\n    wsGotError: (state, action) => {\r\n      state.wsError = action.payload;\r\n      state.wsConnected = false;\r\n    },\r\n    wsClosed: (state) => {\r\n      state.wsError = null;\r\n      state.wsConnected = false;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(postOrder.fulfilled, (state, action) => {\r\n      state.orderMade = action.payload;\r\n    })\r\n    builder.addCase(postOrder.rejected, (state, action) => {\r\n      if (action.payload) {\r\n        console.log(`err.message`, action.payload);\r\n      }\r\n    });\r\n  },\r\n});\r\n\r\nexport const {\r\n  cleanOrderMade,\r\n  wsClosed,\r\n  wsConnectionOpened,\r\n  wsGotError,\r\n  wsGotMessage,\r\n  cleanOrders,\r\n} = orderSlice.actions;\r\n\r\nexport default orderSlice.reducer;\r\n","import { TIngredient } from \"../store/ingredients/ingredientsSlice\";\r\n\r\nconst formatData = (arr: TIngredient[]) => {\r\n  let mainArr: TIngredient[] = [];\r\n  let sauceArr: TIngredient[] = [];\r\n  let bunArr: TIngredient[] = [];\r\n\r\n  arr.forEach((item) => {\r\n    if (item.type === \"bun\") bunArr.push(item);\r\n\r\n    if (item.type === \"main\") mainArr.push(item);\r\n\r\n    if (item.type === \"sauce\") sauceArr.push(item);\r\n  });\r\n\r\n  return {\r\n    main: mainArr,\r\n    bun: bunArr,\r\n    sauce: sauceArr,\r\n  };\r\n};\r\n\r\nexport default formatData;\r\n","import {createAsyncThunk, createSlice, current} from \"@reduxjs/toolkit\";\r\nimport {IngredientsDataType, SelectedIngredientsType} from \"../../../components/App/App\";\r\nimport formatDataIngredients from \"../../utils/formatDataIngredients\";\r\nimport {addEl, deleteEl} from \"../../../components/App/utils\";\r\nimport {constructorAPI} from \"../../api/constructor\";\r\n\r\nexport type TIngredient = {\r\n    _id: string;\r\n    name: string;\r\n    type: string;\r\n    proteins: number;\r\n    fat: number;\r\n    carbohydrates: number;\r\n    calories: number;\r\n    price: number;\r\n    image: string;\r\n    image_mobile: string;\r\n    image_large: string;\r\n    __v: number;\r\n};\r\n\r\nexport const fetchIngredients = createAsyncThunk(\"ingredients/fetchIngredients\", async() => {\r\n        return await constructorAPI.getIngredients();\r\n});\r\n\r\nexport const initialState = {\r\n    ingredients: {\r\n        main: [],\r\n        bun: [],\r\n        sauce: []\r\n    } as IngredientsDataType,\r\n    selectedIngredients: {\r\n        bun: null,\r\n        other: []\r\n    } as SelectedIngredientsType\r\n};\r\n\r\nexport const ingredientsSlice = createSlice({\r\n    name: \"ingredients\",\r\n    initialState,\r\n    reducers: {\r\n        addSelectedIngredient: (state, action) => {\r\n            state.selectedIngredients = addEl(state.selectedIngredients, action.payload);\r\n        },\r\n        deleteSelectedIngredient: (state, action) => {\r\n            state.selectedIngredients = deleteEl(state.selectedIngredients, action.payload.index);\r\n        },\r\n        changePosition: (state, action) => {\r\n            const {dragIndex, hoverIndex} = action.payload;\r\n            const currentState = current(state);\r\n            let other = [...currentState.selectedIngredients.other];\r\n\r\n            const dragEl = other[dragIndex as keyof object];\r\n\r\n            other.splice(dragIndex, 1);\r\n            other.splice(hoverIndex, -1, dragEl);\r\n\r\n            state.selectedIngredients = {\r\n                ...currentState.selectedIngredients,\r\n                other: other\r\n            };\r\n        },\r\n        cleanBasket: (state) => {\r\n            state.selectedIngredients = {\r\n                bun: null,\r\n                other: []\r\n            } as SelectedIngredientsType;\r\n        }\r\n    },\r\n    extraReducers: (builder) => {\r\n        builder.addCase(fetchIngredients.fulfilled, (state, action) => {\r\n            state.ingredients = formatDataIngredients(action.payload);\r\n        })\r\n        builder.addCase(fetchIngredients.rejected, (state, action) => {\r\n            if (action.payload) {\r\n            console.log(`err.message`, action.payload);\r\n            }\r\n        });\r\n    }\r\n});\r\n\r\nexport const {\r\n    addSelectedIngredient,\r\n    deleteSelectedIngredient,\r\n    changePosition,\r\n    cleanBasket\r\n} = ingredientsSlice.actions;\r\n\r\nexport default ingredientsSlice.reducer;\r\n","import { SelectedIngredientsType } from \"./App\";\r\nimport { TIngredient } from \"../../services/store/ingredients/ingredientsSlice\";\r\n\r\nexport const addEl = (\r\n  state: SelectedIngredientsType,\r\n  ingredient: TIngredient\r\n) => {\r\n  if (ingredient.type === \"bun\") {\r\n    const newState = { ...state, bun: ingredient };\r\n    return newState;\r\n  } else {\r\n    let newOther = [...state.other, ingredient];\r\n    return { ...state, other: newOther };\r\n  }\r\n};\r\n\r\nexport const deleteEl = (\r\n  state: SelectedIngredientsType,\r\n  index: number | undefined\r\n) => {\r\n  if (typeof index !== \"undefined\") {\r\n    let newOther = [...state.other];\r\n    newOther.splice(index, 1);\r\n    return { ...state, other: newOther };\r\n  } else {\r\n    return { ...state };\r\n  }\r\n};\r\n","import React, {FC, useRef} from \"react\";\r\nimport s from \"./burgerConstructor.module.scss\";\r\nimport {ConstructorElement, DragIcon} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport {changePosition, deleteSelectedIngredient, TIngredient} from \"../../services/store/ingredients/ingredientsSlice\";\r\nimport {DropTargetMonitor, useDrag, useDrop} from \"react-dnd\";\r\nimport {useDispatch} from \"../../services/hooks\";\r\nimport {XYCoord} from \"dnd-core\";\r\n\r\ninterface IBurgerConstructorDragElement {\r\n    ingredient : TIngredient;\r\n    index : number;\r\n}\r\n\r\nconst BurgerConstructorDragElement : FC < IBurgerConstructorDragElement > = ({ingredient, index}) => {\r\n    const dispatch = useDispatch();\r\n    const ref = useRef < HTMLDivElement > (null);\r\n\r\n    const [\r\n        {\r\n            handlerId\r\n        },\r\n        drop] = useDrop({\r\n        accept: \"sort\",\r\n        collect(monitor) {\r\n            return {\r\n                handlerId: monitor.getHandlerId()\r\n            };\r\n        },\r\n        hover(item : any, monitor : DropTargetMonitor) {\r\n            if (!ref.current) {\r\n                return;\r\n            }\r\n\r\n            const dragIndex = item.index;\r\n            const hoverIndex = index;\r\n\r\n            if (dragIndex === hoverIndex) {\r\n                return;\r\n            }\r\n\r\n            const hoverBoundingRect = ref.current\r\n                ?.getBoundingClientRect();\r\n\r\n            const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\r\n\r\n            const clientOffset = monitor.getClientOffset();\r\n\r\n            const hoverClientY = (clientOffset as XYCoord).y - hoverBoundingRect.top;\r\n\r\n            if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n                return;\r\n            }\r\n\r\n            if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\r\n                return;\r\n            }\r\n\r\n            dispatch(changePosition({dragIndex, hoverIndex}));\r\n\r\n            item.index = hoverIndex;\r\n        }\r\n    });\r\n\r\n    const [\r\n        {\r\n            isDragging\r\n        },\r\n        drag] = useDrag({\r\n        type: \"sort\",\r\n        item: () => {\r\n            return {ingredient, index};\r\n        },\r\n        collect: (monitor : any) => ({\r\n            isDragging: monitor.isDragging()\r\n        })\r\n    });\r\n\r\n    const opacity = isDragging\r\n        ? 0\r\n        : 1;\r\n\r\n    drag(drop(ref));\r\n\r\n    return (\r\n        <div\r\n            className={s.lineElement}\r\n            style={{\r\n            opacity: opacity\r\n        }}\r\n            ref={ref}\r\n            data-handler-id={handlerId}>\r\n            <DragIcon type=\"primary\"/>\r\n            <ConstructorElement\r\n                text={ingredient.name}\r\n                price={ingredient.price}\r\n                thumbnail={ingredient.image_mobile}\r\n                handleClose={() => {\r\n                dispatch(deleteSelectedIngredient({ingredient: ingredient, index}));\r\n            }}/>\r\n        </div>\r\n    );\r\n};\r\nexport default BurgerConstructorDragElement;\r\n","import React, {FC, useMemo, useState} from \"react\";\r\nimport clsx from \"clsx\";\r\nimport s from \"./burgerConstructor.module.scss\";\r\nimport buns from '../../images/buns.png'\r\nimport {Button, ConstructorElement, CurrencyIcon} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport {postOrder} from \"../../services/store/order/orderSlice\";\r\nimport {addSelectedIngredient, cleanBasket} from \"../../services/store/ingredients/ingredientsSlice\";\r\nimport {useDrop} from \"react-dnd\";\r\nimport BurgerConstructorDragElement from \"./BurgerConstructorDragElement\";\r\nimport {useHistory, useLocation} from \"react-router-dom\";\r\nimport {useDispatch, useSelector} from \"../../services/hooks\";\r\n\r\ninterface IBurgerConstructor {}\r\n\r\nconst BurgerConstructor : FC < IBurgerConstructor > = () => {\r\n    const dispatch = useDispatch();\r\n\r\n    const [isShowLoader, setShowLoader] = useState(false);\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n    const refreshToken = localStorage.getItem(\"refreshToken\");\r\n\r\n    const {selectedIngredients} = useSelector((state) => state.ingredients);\r\n\r\n    const [\r\n        {\r\n            isHover\r\n        },\r\n        ref] = useDrop({\r\n        accept: \"ingredients\",\r\n        collect: (monitor) => ({\r\n            isHover: monitor.isOver()\r\n        }),\r\n        drop(ingredient) {\r\n            dispatch(addSelectedIngredient(ingredient));\r\n        }\r\n    });\r\n\r\n    const isEmptyConstructor = !!selectedIngredients.bun || (selectedIngredients.other && selectedIngredients.other.length > 0);\r\n\r\n    const idArray = useMemo(() => {\r\n        const arrayOtherIds = selectedIngredients\r\n            .other\r\n            .reduce((acc : string[], elem) => {\r\n                return [\r\n                    ...acc,\r\n                    elem._id\r\n                ];\r\n            }, []);\r\n        if (selectedIngredients.bun) {\r\n            arrayOtherIds.push(selectedIngredients.bun\r\n                ?._id);\r\n        }\r\n\r\n        return arrayOtherIds;\r\n    }, [selectedIngredients]);\r\n\r\n    const handleClickButton = async() => {\r\n        if (selectedIngredients.bun) {\r\n            if (refreshToken) {\r\n                setShowLoader(true);\r\n\r\n                try {\r\n                    await dispatch(postOrder(idArray));\r\n                    dispatch(cleanBasket());\r\n                    setShowLoader(false);\r\n                } catch (err) {\r\n                    setShowLoader(false);\r\n                    console.log(err);\r\n                }\r\n            } else {\r\n                history.replace({\r\n                    pathname: \"/login\",\r\n                    state: {\r\n                        from: location\r\n                    }\r\n                });\r\n            }\r\n        } else {\r\n            console.log(`Больше ингредиентов`);\r\n        }\r\n    };\r\n\r\n    const totalBun = selectedIngredients.bun\r\n        ? selectedIngredients.bun.price * 2\r\n        : 0;\r\n    const totalOther = selectedIngredients.other.length > 0\r\n        ? selectedIngredients\r\n            .other\r\n            .reduce((acc : number, current) => {\r\n                return acc + current.price;\r\n            }, 0)\r\n        : 0;\r\n\r\n    return (\r\n        <div ref={ref} className={clsx(s.root, isHover && s.over)}>\r\n            {isEmptyConstructor\r\n                ? (\r\n                    <div className={s.ingredientsContainer}>\r\n                        {selectedIngredients.bun && (<ConstructorElement\r\n                            isLocked={true}\r\n                            type={\"top\"}\r\n                            text={`${selectedIngredients.bun.name} верх`}\r\n                            price={selectedIngredients.bun.price}\r\n                            thumbnail={selectedIngredients.bun.image_mobile}/>)}\r\n\r\n                        <div className={s.list}>\r\n                            {selectedIngredients.other && selectedIngredients\r\n                                .other\r\n                                .map((item, index) => (<BurgerConstructorDragElement key={item._id} ingredient={item} index={index}/>))}\r\n                        </div>\r\n                        {selectedIngredients.bun && (<ConstructorElement\r\n                            isLocked={true}\r\n                            type={\"bottom\"}\r\n                            text={`${selectedIngredients.bun.name} низ`}\r\n                            price={selectedIngredients.bun.price}\r\n                            thumbnail={selectedIngredients.bun.image_mobile}/>)}\r\n                        <div className={s.orderContainer}>\r\n                            <div className={clsx(s.count, \"mr-3\")}>\r\n                                <p className={clsx(s.text, \"mr-1 text_type_digits-default\")}>\r\n                                    {totalBun + totalOther}\r\n                                </p>\r\n                                <CurrencyIcon type=\"primary\"/>\r\n                            </div>\r\n                            <Button type=\"primary\" size=\"large\" onClick={handleClickButton}>\r\n                                <div\r\n                                    style={{\r\n                                    position: \"relative\",\r\n                                    minWidth: 134,\r\n                                    minHeight: 24\r\n                                }}>\r\n                                    {isShowLoader\r\n                                        ? (<span className={s.loader}/>)\r\n                                        : (\"Оформить заказ\")}\r\n                                </div>\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                )\r\n                : (\r\n                    <p className={clsx(s.image, \"m-2 text_type_main-large\")}>\r\n                        <img src={buns} alt=\"Булочки\"/>\r\n                    </p>\r\n                )}\r\n        </div>\r\n    );\r\n};\r\nexport default BurgerConstructor;\r\n","export default \"data:image/png;base64,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\"","import React, {FC} from \"react\";\r\nimport clsx from \"clsx\";\r\nimport s from \"./Main.module.scss\";\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\nimport BurgerIngredients from \"../../components/BurgerIngredients/BurgerIngredients\";\r\nimport BurgerConstructor from \"../../components/BurgerConstructor/BurgerContstuctor\";\r\n\r\n\r\nconst Main:FC = () => {\r\n  return (\r\n    <section className={clsx(s.main, \"content-wrapper\")}>\r\n      <h1 className={clsx(s.text, \"m-2 text_type_main-large\")}>\r\n        Соберите бургер\r\n      </h1>\r\n      <div className={s.burgerContainer}>\r\n        <DndProvider backend={HTML5Backend}>\r\n          <BurgerIngredients />\r\n          <BurgerConstructor />\r\n        </DndProvider>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\nexport default Main;\r\n","import { EnumEndpoints } from \"./enumEndpoints\";\r\nimport { BASE_URL } from \"./index\";\r\nimport { TLoginUserParams, TRegisterUserParams } from \"../store/auth/authSlice\";\r\nimport { getCookie } from \"../utils/cookie\";\r\n\r\nexport const authAPI = {\r\n  async forgotPassword(form: { email: string }) {\r\n    return await fetch(BASE_URL + EnumEndpoints.forgotResetPassword, {\r\n      method: \"POST\",\r\n      mode: \"cors\",\r\n      cache: \"no-cache\",\r\n      credentials: \"same-origin\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      redirect: \"follow\",\r\n      referrerPolicy: \"no-referrer\",\r\n      body: JSON.stringify(form),\r\n    })\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        if (!res.success) {\r\n          throw new Error(\"ERROR:\" + res.message);\r\n        }\r\n        return res;\r\n      });\r\n  },\r\n  async resetPassword(form: { password: string; token: string }) {\r\n    return await fetch(BASE_URL + EnumEndpoints.resetPassword, {\r\n      method: \"POST\",\r\n      mode: \"cors\",\r\n      cache: \"no-cache\",\r\n      credentials: \"same-origin\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      redirect: \"follow\",\r\n      referrerPolicy: \"no-referrer\",\r\n      body: JSON.stringify(form),\r\n    })\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        if (!res.success) {\r\n          throw new Error(\"ERROR:\" + res.message);\r\n        }\r\n        return res;\r\n      });\r\n  },\r\n  async registerUser(form: TRegisterUserParams) {\r\n    return await fetch(BASE_URL + EnumEndpoints.registerUser, {\r\n      method: \"POST\",\r\n      mode: \"cors\",\r\n      cache: \"no-cache\",\r\n      credentials: \"same-origin\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      redirect: \"follow\",\r\n      referrerPolicy: \"no-referrer\",\r\n      body: JSON.stringify(form),\r\n    })\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        if (!res.success) {\r\n          throw new Error(res.message);\r\n        }\r\n        return res;\r\n      });\r\n  },\r\n  async loginUser(form: TLoginUserParams) {\r\n    return await fetch(BASE_URL + EnumEndpoints.loginUser, {\r\n      method: \"POST\",\r\n      mode: \"cors\",\r\n      cache: \"no-cache\",\r\n      credentials: \"same-origin\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      redirect: \"follow\",\r\n      referrerPolicy: \"no-referrer\",\r\n      body: JSON.stringify(form),\r\n    })\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        if (!res.success) {\r\n          throw new Error(\"ERROR:\" + res.message);\r\n        }\r\n        return res;\r\n      });\r\n  },\r\n\r\n  async logoutUser(form: { token: string }) {\r\n    return await fetch(BASE_URL + EnumEndpoints.logoutUser, {\r\n      method: \"POST\",\r\n      mode: \"cors\",\r\n      cache: \"no-cache\",\r\n      credentials: \"same-origin\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      redirect: \"follow\",\r\n      referrerPolicy: \"no-referrer\",\r\n      body: JSON.stringify(form),\r\n    });\r\n  },\r\n  \r\n  async updateToken(form: { token: string }) {\r\n    return await fetch(BASE_URL + EnumEndpoints.updateToken, {\r\n      method: \"POST\",\r\n      mode: \"cors\",\r\n      cache: \"no-cache\",\r\n      credentials: \"same-origin\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      redirect: \"follow\",\r\n      referrerPolicy: \"no-referrer\",\r\n      body: JSON.stringify(form),\r\n    })\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        if (!res.success) {\r\n          console.log(`error`);\r\n          throw new Error(res.message);\r\n        }\r\n        return res;\r\n      });\r\n  },\r\n  async getAuthUser() {\r\n    return await fetch(BASE_URL + EnumEndpoints.user, {\r\n      method: \"GET\",\r\n      mode: \"cors\",\r\n      cache: \"no-cache\",\r\n      credentials: \"same-origin\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: getCookie(\"token\") as string,\r\n      },\r\n      redirect: \"follow\",\r\n      referrerPolicy: \"no-referrer\",\r\n    })\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        if (!res.success) {\r\n          console.log(`error`);\r\n          throw new Error(res.message);\r\n        }\r\n        return res;\r\n      });\r\n  },\r\n  async patchAuthUser(form: TLoginUserParams) {\r\n    return await fetch(BASE_URL + EnumEndpoints.user, {\r\n      method: \"PATCH\",\r\n      mode: \"cors\",\r\n      cache: \"no-cache\",\r\n      credentials: \"same-origin\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: getCookie(\"token\") as string,\r\n      },\r\n      redirect: \"follow\",\r\n      referrerPolicy: \"no-referrer\",\r\n      body: JSON.stringify(form),\r\n    })\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        if (!res.success) {\r\n          throw new Error(\"ERROR:\" + res.message);\r\n        }\r\n        return res;\r\n      });\r\n  },\r\n};\r\n","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport { authAPI } from \"../../api/auth\";\r\nimport { setCookie } from \"../../utils/cookie\";\r\n\r\nexport type TUserData = {\r\n  email: string;\r\n  name: string;\r\n};\r\ntype TLoginUserResponse = {\r\n  success: boolean;\r\n  accessToken: string;\r\n  refreshToken: string;\r\n  user: TUserData;\r\n  message?: string;\r\n};\r\n\r\ntype TPatchUserResponse = {\r\n  success: boolean;\r\n  user: TUserData;\r\n};\r\n\r\nexport type TLoginUserParams = {\r\n  email: string;\r\n  password: string;\r\n};\r\n\r\nexport type TRegisterUserParams = {\r\n  email: string;\r\n  password: string;\r\n  name: string;\r\n};\r\n\r\n\r\nexport const loginUser = createAsyncThunk<TLoginUserResponse, TLoginUserParams>(\r\n  \"auth/loginUser\",\r\n  async (form) => {\r\n      const data = await authAPI.loginUser(form);\r\n      setCookie(\"token\", data.accessToken, { expires: 1200 });\r\n      localStorage.setItem(\"refreshToken\", data.refreshToken);\r\n      return data;\r\n  }\r\n);\r\n\r\nexport const registerUser = createAsyncThunk<\r\n  TLoginUserResponse,\r\n  TRegisterUserParams\r\n>(\"auth/registerUser\", async (form) => {\r\n\r\n    const data = await authAPI.registerUser(form);\r\n    setCookie(\"token\", data.accessToken, { expires: 1200 });\r\n    localStorage.setItem(\"refreshToken\", data.refreshToken);\r\n    return data;\r\n});\r\n\r\nexport const patchUser = createAsyncThunk<\r\n  TPatchUserResponse,\r\n  TRegisterUserParams\r\n>(\"auth/patchUser\", async (form) => {\r\n    return await authAPI.patchAuthUser(form);\r\n});\r\nexport const getUser = createAsyncThunk(\"auth/getUser\", async () => {\r\n    const res = await authAPI.getAuthUser();\r\n    return res;\r\n});\r\n\r\nexport const initialState = { userData: {} as TUserData };\r\n\r\nconst authSlice = createSlice({\r\n  name: \"auth\",\r\n  initialState,\r\n  reducers: {\r\n    setUserData: (state, action) => {\r\n      state.userData = action.payload;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(loginUser.fulfilled, (state, action) => {\r\n      if (action.payload) {\r\n        state.userData = action.payload.user;\r\n      }\r\n    })\r\n    builder.addCase(loginUser.rejected, (state, action) => {\r\n      if (action.payload) {\r\n      console.log(`err.message`, action.payload);\r\n      }\r\n    });\r\n    builder.addCase(registerUser.fulfilled, (state, action) => {\r\n      if (action.payload) {\r\n        state.userData = action.payload.user;\r\n      }\r\n    })\r\n    builder.addCase(registerUser.rejected, (state, action) => {\r\n      if (action.payload) {\r\n      console.log(`err.message`, action.payload);\r\n      }\r\n    });\r\n    builder.addCase(patchUser.fulfilled, (state, action) => {\r\n      state.userData = action.payload.user;\r\n    })\r\n    builder.addCase(patchUser.rejected, (state, action) => {\r\n      if (action.payload) {\r\n      console.log(`err.message`, action.payload);\r\n      }\r\n    });\r\n    builder.addCase(getUser.fulfilled, (state, action) => {\r\n      if (action.payload) {\r\n        state.userData = action.payload.user;\r\n      }\r\n    })\r\n    builder.addCase(getUser.rejected, (state, action) => {\r\n      if (action.payload) {\r\n      console.log(`err.message`, action.payload);\r\n      }\r\n    });\r\n  },\r\n});\r\nexport const { setUserData } = authSlice.actions;\r\n\r\nexport default authSlice.reducer;\r\n","import React, {ChangeEvent, FormEvent, useRef} from \"react\";\r\nimport {Link, Redirect, useHistory, useLocation} from \"react-router-dom\";\r\nimport {Button, Input} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport s from \"./Login.module.scss\";\r\nimport {useDispatch} from \"../../services/hooks\";\r\nimport {loginUser} from \"../../services/store/auth/authSlice\";\r\n\r\nexport interface ILocationState {\r\n    from : {\r\n        pathname: string;\r\n    };\r\n}\r\n\r\nconst Login = () => {\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n    const {state} = useLocation < ILocationState > ();\r\n    const [form,\r\n        setForm] = React.useState({email: \"\", password: \"\"});\r\n    const refreshToken = localStorage.getItem(\"refreshToken\");\r\n\r\n    const inputRef = useRef < HTMLInputElement > (null);\r\n\r\n    const onIconClick = () => {\r\n        setTimeout(() => {\r\n            if (inputRef && inputRef.current) {\r\n                inputRef\r\n                    .current\r\n                    .focus();\r\n            }\r\n        }, 0);\r\n        alert(\"Icon Click Callback\");\r\n    };\r\n\r\n    const onChangeInput = (e : ChangeEvent < HTMLInputElement >) => {\r\n        setForm((prevState) => {\r\n            return {\r\n                ...prevState,\r\n                [e.target.name]: e.target.value\r\n            };\r\n        });\r\n    };\r\n\r\n    const handleSubmit = async(event : FormEvent) => {\r\n        event.preventDefault();\r\n        await dispatch(loginUser(form));\r\n        history.replace({\r\n            pathname: state\r\n                ?.from.pathname || \"/\"\r\n        });\r\n    };\r\n\r\n    if (refreshToken) {\r\n        return (<Redirect\r\n            to={{\r\n            pathname: state\r\n                ?.from.pathname || \"/\"\r\n        }}/>);\r\n    }\r\n\r\n    return (\r\n        <div className={s.root}>\r\n            <p className=\"text text_type_main-medium pt-6\">Вход\r\n            </p>\r\n            <form className={s.form} onSubmit={handleSubmit}>\r\n                <div\r\n                    className={\"mb-6\"}\r\n                    style={{\r\n                    minWidth: 480\r\n                }}>\r\n                    <Input\r\n                        type={\"email\"}\r\n                        placeholder={\"E-mail\"}\r\n                        onChange={onChangeInput}\r\n                        value={form.email}\r\n                        name={\"email\"}\r\n                        error={false}\r\n                        ref={inputRef}\r\n                        onIconClick={onIconClick}\r\n                        errorText={\"Ошибка\"}\r\n                        size={\"default\"}/>\r\n                    <Input\r\n                        type={\"password\"}\r\n                        placeholder={\"Пароль\"}\r\n                        onChange={onChangeInput}\r\n                        icon={\"ShowIcon\"}\r\n                        value={form.password}\r\n                        name={\"password\"}\r\n                        error={false}\r\n                        ref={inputRef}\r\n                        onIconClick={onIconClick}\r\n                        errorText={\"Ошибка\"}\r\n                        size={\"default\"}/>\r\n                </div>\r\n                <Button type=\"primary\" size=\"medium\">\r\n                    Войти\r\n                </Button>\r\n            </form>\r\n\r\n            <div className={\"mt-10\"}>\r\n                <p className=\"text text_type_main-default text_color_inactive\">\r\n                    Вы — новый пользователь?{\" \"}\r\n                    <Link to={\"/register\"} className={\"text_color_link\"}>\r\n                        Зарегистрироваться\r\n                    </Link>\r\n                </p>\r\n                <p className=\"text text_type_main-default text_color_inactive\">\r\n                    Забыли пароль?{\" \"}\r\n                    <Link to={\"/forgot-password\"} className={\"text_color_link\"}>\r\n                        Восстановить пароль\r\n                    </Link>\r\n                </p>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\nexport default Login;\r\n","import React, {ChangeEvent, FC} from \"react\";\r\nimport {Link, Redirect, useHistory} from \"react-router-dom\";\r\nimport s from \"./Register.module.scss\";\r\nimport {Button, Input} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport {registerUser} from \"../../services/store/auth/authSlice\";\r\nimport {useDispatch} from \"../../services/hooks\";\r\n\r\ninterface IRegister {}\r\n\r\nconst Register : FC < IRegister > = () => {\r\n    const history = useHistory();\r\n    const [form,\r\n        setForm] = React.useState({name: \"\", email: \"\", password: \"\"});\r\n    const dispatch = useDispatch();\r\n    const inputRef = React.useRef < HTMLInputElement > (null);\r\n    const refreshToken = localStorage.getItem(\"refreshToken\");\r\n\r\n    const onIconClick = () => {\r\n        setTimeout(() => {\r\n            if (inputRef && inputRef.current) {\r\n                inputRef\r\n                    .current\r\n                    .focus();\r\n            }\r\n        }, 0);\r\n        alert(\"Icon Click Callback\");\r\n    };\r\n\r\n    const onChangeInput = (e : ChangeEvent < HTMLInputElement >) => {\r\n        setForm((prevState) => {\r\n            return {\r\n                ...prevState,\r\n                [e.target.name]: e.target.value\r\n            };\r\n        });\r\n    };\r\n\r\n    const handleSubmit = () => {\r\n        dispatch(registerUser(form));\r\n        history.replace({pathname: \"/\"});\r\n    };\r\n\r\n    if (refreshToken) {\r\n        return (<Redirect to={{\r\n            pathname: \"/\"\r\n        }}/>);\r\n    }\r\n\r\n    return (\r\n        <div className={s.root}>\r\n            <p className=\"text text_type_main-medium pt-6\">Регистрация\r\n            </p>\r\n            <form className={s.form} onSubmit={handleSubmit}>\r\n                <div\r\n                    className={\"mb-6\"}\r\n                    style={{\r\n                    minWidth: 480\r\n                }}>\r\n                    <Input\r\n                        type={\"text\"}\r\n                        placeholder={\"Имя\"}\r\n                        onChange={onChangeInput}\r\n                        value={form.name}\r\n                        name={\"name\"}\r\n                        error={false}\r\n                        ref={inputRef}\r\n                        onIconClick={onIconClick}\r\n                        errorText={\"Ошибка\"}\r\n                        size={\"default\"}/>{\" \"}\r\n                    <Input\r\n                        type={\"email\"}\r\n                        placeholder={\"E-mail\"}\r\n                        onChange={onChangeInput}\r\n                        value={form.email}\r\n                        name={\"email\"}\r\n                        error={false}\r\n                        ref={inputRef}\r\n                        onIconClick={onIconClick}\r\n                        errorText={\"Ошибка\"}\r\n                        size={\"default\"}/>\r\n                    <Input\r\n                        type={\"password\"}\r\n                        placeholder={\"Пароль\"}\r\n                        onChange={onChangeInput}\r\n                        icon={\"ShowIcon\"}\r\n                        value={form.password}\r\n                        name={\"password\"}\r\n                        error={false}\r\n                        ref={inputRef}\r\n                        onIconClick={onIconClick}\r\n                        errorText={\"Ошибка\"}\r\n                        size={\"default\"}/>\r\n                </div>\r\n                <Button type=\"primary\" size=\"medium\">\r\n                    Зарегистрироваться\r\n                </Button>\r\n            </form>\r\n            <div className={\"mt-10\"}>\r\n                <p className=\"text text_type_main-default text_color_inactive\">\r\n                    Зарегистрированы?{\" \"}\r\n                    <Link to={\"/login\"} className={\"text_color_link\"}>\r\n                        Войти\r\n                    </Link>\r\n                </p>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\nexport default Register;\r\n","import React, { FC, FormEvent } from \"react\";\r\nimport s from \"./ForgotPassword.module.scss\";\r\nimport {\r\n  Button,\r\n  Input,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Link, Redirect, useHistory, useLocation } from \"react-router-dom\";\r\nimport { authAPI } from \"../../services/api/auth\";\r\n\r\ninterface IForgotPassword {}\r\n\r\nconst ForgotPassword: FC<IForgotPassword> = (props) => {\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const [value, setValue] = React.useState(\"\");\r\n  const inputRef = React.useRef<HTMLInputElement>(null);\r\n\r\n  const refreshToken = localStorage.getItem(\"refreshToken\");\r\n\r\n  const onIconClick = () => {\r\n    setTimeout(() => {\r\n      if (inputRef && inputRef.current) {\r\n        inputRef.current.focus();\r\n      }\r\n    }, 0);\r\n    alert(\"Icon Click Callback\");\r\n  };\r\n\r\n  const handleSubmit = async (event: FormEvent) => {\r\n    event.preventDefault();\r\n    try {\r\n      await authAPI.forgotPassword({ email: value });\r\n      history.replace({\r\n        pathname: \"/reset-password\",\r\n        state: {\r\n          from: location,\r\n        },\r\n      });\r\n    } catch (err: any) {\r\n      console.log(err.message);\r\n    }\r\n  };\r\n\r\n  if (refreshToken) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: \"/\",\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={s.root}>\r\n      <p className=\"text text_type_main-medium pt-6\">Восстановление пароля </p>\r\n      <form className={s.form} onSubmit={handleSubmit}>\r\n        <div className={\"mb-6\"} style={{ minWidth: 480 }}>\r\n          <Input\r\n            type={\"email\"}\r\n            placeholder={\"укажите e-mail\"}\r\n            onChange={(e) => setValue(e.target.value)}\r\n            value={value}\r\n            name={\"name\"}\r\n            error={false}\r\n            ref={inputRef}\r\n            onIconClick={onIconClick}\r\n            errorText={\"Ошибка\"}\r\n            size={\"default\"}\r\n          />\r\n        </div>\r\n        <Button type=\"primary\" size=\"medium\">\r\n          Восстановить\r\n        </Button>\r\n      </form>\r\n\r\n      <div className={\"mt-10\"}>\r\n        <p className=\"text text_type_main-default text_color_inactive\">\r\n          Вспомнили пароль?{\" \"}\r\n          <Link to={\"/login\"} className={\"text_color_link\"}>\r\n            Войти\r\n          </Link>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default ForgotPassword;\r\n","import React, {FC, ChangeEvent, FormEvent} from \"react\";\r\nimport {Button, Input} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport clsx from \"clsx\";\r\nimport s from \"../Profile.module.scss\";\r\nimport {patchUser} from \"../../../services/store/auth/authSlice\";\r\nimport {useDispatch, useSelector} from \"../../../services/hooks\";\r\n\r\nconst ProfileForm : FC = () => {\r\n    const dispatch = useDispatch();\r\n    const inputRef = React.useRef < HTMLInputElement > (null);\r\n    const {userData} = useSelector((state) => state.auth);\r\n\r\n    const [form,\r\n        setForm] = React.useState({name: userData.name, email: userData.email, password: \"\"});\r\n\r\n    const onIconClick = () => {\r\n        setTimeout(() => {\r\n            if (inputRef && inputRef.current) {\r\n                inputRef\r\n                    .current\r\n                    .focus();\r\n            }\r\n        }, 0);\r\n        alert(\"Icon Click Callback\");\r\n    };\r\n\r\n    const onChangeInput = (e : ChangeEvent < HTMLInputElement >) => {\r\n        setForm((prevState) => {\r\n            return {\r\n                ...prevState,\r\n                [e.target.name]: e.target.value\r\n            };\r\n        });\r\n    };\r\n\r\n    const handleCancel = () => {\r\n        setForm({name: userData.name, email: userData.email, password: \"\"});\r\n    };\r\n\r\n    const handleSubmit = (event : FormEvent) => {\r\n        event.preventDefault();\r\n        dispatch(patchUser(form));\r\n    };\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <Input\r\n                type={\"text\"}\r\n                placeholder={\"Имя\"}\r\n                onChange={onChangeInput}\r\n                icon={\"EditIcon\"}\r\n                value={form.name}\r\n                name={\"name\"}\r\n                error={false}\r\n                ref={inputRef}\r\n                onIconClick={onIconClick}\r\n                errorText={\"Ошибка\"}\r\n                size={\"default\"}/>\r\n            <Input\r\n                type={\"email\"}\r\n                placeholder={\"Логин\"}\r\n                onChange={onChangeInput}\r\n                icon={\"EditIcon\"}\r\n                value={form.email}\r\n                name={\"email\"}\r\n                error={false}\r\n                ref={inputRef}\r\n                onIconClick={onIconClick}\r\n                errorText={\"Ошибка\"}\r\n                size={\"default\"}/>\r\n            <Input\r\n                type={\"password\"}\r\n                placeholder={\"Пароль\"}\r\n                onChange={onChangeInput}\r\n                icon={\"EditIcon\"}\r\n                value={form.password}\r\n                name={\"password\"}\r\n                error={false}\r\n                ref={inputRef}\r\n                onIconClick={onIconClick}\r\n                errorText={\"Ошибка\"}\r\n                size={\"default\"}/>\r\n            <div className={clsx(s.buttonLine, \"mt-6\")}>\r\n                <Button onClick={handleCancel} type=\"secondary\" size=\"medium\">\r\n                    Отмена\r\n                </Button>\r\n                <Button type=\"primary\" size=\"medium\">\r\n                    Сохранить\r\n                </Button>\r\n            </div>\r\n        </form>\r\n    );\r\n};\r\nexport default ProfileForm;\r\n","import React, {FC} from \"react\";\r\nimport s from \"./ProfileLink.module.scss\";\r\nimport clsx from \"clsx\";\r\nimport {Link, useRouteMatch} from \"react-router-dom\";\r\n\r\ninterface IProfileLink {\r\n    text : string;\r\n    to : string;\r\n}\r\n\r\nconst ProfileLink : FC < IProfileLink > = ({text, to}) => {\r\n    const match = useRouteMatch({path: to, exact: true});\r\n\r\n    return (\r\n        <Link to={to} className={s.link}>\r\n            <p\r\n                className={clsx(\"text text_type_main-medium mt-6\", !match && \"text_color_inactive\")}>\r\n                {text}\r\n            </p>\r\n        </Link>\r\n    );\r\n};\r\n\r\nexport default ProfileLink;\r\n","import { IngredientsDataType } from \"../../components/App/App\";\r\nimport { TIngredient } from \"../store/ingredients/ingredientsSlice\";\r\n\r\nexport const findIngredient = (\r\n  ingredients: IngredientsDataType,\r\n  id: string\r\n) => {\r\n  let ingredient: TIngredient | undefined;\r\n  for (let key in ingredients) {\r\n    if (!ingredient) {\r\n      const arrayIng: TIngredient[] = ingredients[key as keyof object];\r\n      ingredient = arrayIng.find((item) => item._id === id);\r\n    }\r\n  }\r\n  return ingredient;\r\n};\r\n","import { formatRelative, parseISO } from \"date-fns\";\r\nimport { ru } from \"date-fns/locale\";\r\nimport { capitalizeFirstLetter } from \"./capitalizeFirstLetter\";\r\n\r\nexport const formatDate = (date: string) => {\r\n  const today = new Date();\r\n\r\n  const comparisonDate = parseISO(date);\r\n\r\n  let timeZone = comparisonDate.toLocaleDateString(\"ru-Ru\", {\r\n    timeZoneName: \"short\",\r\n  });\r\n\r\n  timeZone = timeZone.split(\" \")[1];\r\n\r\n  const d = formatRelative(comparisonDate, today, {\r\n    locale: ru,\r\n  });\r\n\r\n  return capitalizeFirstLetter(d + \", \" + timeZone);\r\n};\r\n","export const capitalizeFirstLetter = (string: string) => {\r\n  return string.charAt(0).toUpperCase() + string.slice(1);\r\n};\r\n\r\n","import React, { useEffect } from \"react\";\r\nimport s from \"./Feed.module.scss\";\r\nimport clsx from \"clsx\";\r\nimport FeedOrderCard from \"./FeedOrderCard/FeedOrderCard\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport {\r\n  cleanOrders,\r\n  TWSOrder,\r\n  wsConnectionClose,\r\n  wsConnectionStart,\r\n} from \"../../services/store/order/orderSlice\";\r\n\r\nimport { useDispatch, useSelector } from \"../../services/hooks\";\r\n\r\nexport const ALL_ORDERS_URL = \"wss://norma.nomoreparties.space/orders/all\";\r\n\r\nconst Feed = () => {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  const { orders, total, totalToday } = useSelector((state) => state.order);\r\n\r\n  useEffect(() => {\r\n    dispatch(wsConnectionStart(ALL_ORDERS_URL));\r\n    return () => {\r\n      dispatch(wsConnectionClose());\r\n      dispatch(cleanOrders());\r\n    };\r\n  }, [dispatch]);\r\n\r\n  const handleClick = (order: TWSOrder) => {\r\n    history.push({\r\n      pathname: \"/feed/\" + order.number,\r\n      state: { background: location },\r\n    });\r\n  };\r\n\r\n  const ordersDone = orders.filter(\r\n    (item, index) => item.status === \"done\" && index < 9\r\n  );\r\n  const ordersPending = orders.filter(\r\n    (item, index) => item.status === \"pending\" && index < 9\r\n  );\r\n  return (\r\n    <div className={clsx(s.root, \"content-wrapper\")}>\r\n      <p className=\"text text_type_main-large mt-10 mb-5\">Лента заказов</p>\r\n      <div className={s.content}>\r\n        <div className={s.content__column}>\r\n          {orders.map((order, index) => (\r\n            <FeedOrderCard order={order} key={index} onClick={handleClick} />\r\n          ))}\r\n        </div>\r\n        <div className={clsx(s.content__column, \"pl-15\")}>\r\n          <div className={clsx(s.status, \"mb-15\")}>\r\n            <div className={s.status__column}>\r\n              <p className=\"text text_type_main-medium mb-6\">Готовы: </p>\r\n              <div className={s.column__feed}>\r\n                {ordersDone.map((item, index) => (\r\n                  <p\r\n                    key={index}\r\n                    className={clsx(\r\n                      s.text_color_bold,\r\n                      \"text text_type_digits-default mb-1\"\r\n                    )}\r\n                  >\r\n                    {item.number}\r\n                  </p>\r\n                ))}\r\n              </div>\r\n            </div>\r\n            <div className={s.status__column}>\r\n              <p className=\"text text_type_main-medium mb-6\">В работе:</p>\r\n              <div className={s.column__feed}>\r\n                {ordersPending.map((item, index) => (\r\n                  <p\r\n                    key={index}\r\n                    className={clsx(\"text text_type_digits-default mb-1\")}\r\n                  >\r\n                    {item.number}\r\n                  </p>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <p className=\"text text_type_main-medium\">Выполнено за все время:</p>\r\n          <p className=\"text text_type_digits-large mb-15\">{total}</p>\r\n          <p className=\"text text_type_main-medium\">Выполнено за сегодня:</p>\r\n          <p className=\"text text_type_digits-large\">{totalToday}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default Feed;\r\n","import React, { FC } from \"react\";\r\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport s from \"./FeedOrderCard.module.scss\";\r\nimport clsx from \"clsx\";\r\nimport { TWSOrder } from \"../../../services/store/order/orderSlice\";\r\n\r\nimport { findIngredient } from \"../../../services/utils/findIngredient\";\r\nimport { formatDate } from \"../../../services/utils/formatDate\";\r\nimport { enumStatusOrder } from \"../FeedOrder/FeedOrder\";\r\nimport { useSelector } from \"../../../services/hooks\";\r\n\r\ninterface IFeedOrderCard {\r\n  order: TWSOrder;\r\n  onClick(order: TWSOrder): void;\r\n  status?: boolean;\r\n}\r\n\r\nconst FeedOrderCard: FC<IFeedOrderCard> = ({ order, onClick }) => {\r\n  const hiddenCount = order.ingredients.length - 5;\r\n\r\n  const { ingredients } = useSelector((state) => state.ingredients);\r\n\r\n  const orderPrice = order.ingredients.reduce((acc, curValue) => {\r\n    const ingredient = findIngredient(ingredients, curValue);\r\n    if (ingredient) {\r\n      return acc + ingredient.price;\r\n    }\r\n    return acc;\r\n  }, 0);\r\n  return (\r\n    <div className={clsx(s.root, \"p-6 m-2\")} onClick={() => onClick(order)}>\r\n      <div className={s.line}>\r\n        <p className=\"text text_type_digits-default\">#{order.number}</p>\r\n        <p\r\n          className={\r\n            \"text text_type_main-default text_color_inactive mt-2 mb-6\"\r\n          }\r\n        >\r\n          {formatDate(order.createdAt)}\r\n        </p>\r\n      </div>\r\n      <p className=\"text text_type_main-medium mt-6 mb-6\">{order.name}</p>\r\n      {order?.status && (\r\n        <p\r\n          className={clsx(\r\n            \"text text_type_main-default mb-10\",\r\n            order.status === \"done\" && s.text_color_bold\r\n          )}\r\n        >\r\n          {enumStatusOrder[order?.status as keyof object]}\r\n        </p>\r\n      )}\r\n      <div className={s.line}>\r\n        <div className={clsx(s.ingredients, \"pl-5\")}>\r\n          {order.ingredients.map((item, index) => {\r\n            if (index > 5) return <div key={index} />;\r\n            if (index === 5) {\r\n              return (\r\n                <div className={s.img} key={index}>\r\n                  <img\r\n                    key={index}\r\n                    src={findIngredient(ingredients, item)?.image_mobile}\r\n                    alt={item}\r\n                  />\r\n                  <p\r\n                    className={clsx(\r\n                      s.overflow,\r\n                      \"text text_type_digits-default\"\r\n                    )}\r\n                  >\r\n                    +{hiddenCount}\r\n                  </p>\r\n                </div>\r\n              );\r\n            }\r\n            return (\r\n              <div className={s.img} key={index}>\r\n                <img\r\n                  key={index}\r\n                  src={findIngredient(ingredients, item)?.image_mobile}\r\n                  alt={item}\r\n                />\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n        <div className={s.total}>\r\n          <p className=\"text text_type_digits-default mr-1\">{orderPrice}</p>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default FeedOrderCard;\r\n","import React, { useEffect } from \"react\";\r\nimport FeedOrderCard from \"../../Feed/FeedOrderCard/FeedOrderCard\";\r\nimport s from \"./ProfileHistory.module.scss\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport {\r\n  cleanOrders,\r\n  TWSOrder,\r\n  wsConnectionClose,\r\n  wsConnectionStart,\r\n} from \"../../../services/store/order/orderSlice\";\r\n\r\nimport { getCookie } from \"../../../services/utils/cookie\";\r\nimport { useDispatch, useSelector } from \"../../../services/hooks\";\r\n\r\nexport const USER_ORDERS_URL = \"wss://norma.nomoreparties.space/orders\";\r\n\r\nconst ProfileHistory = () => {\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n\r\n  const { orders } = useSelector((state) => state.order);\r\n\r\n  console.log(`### ordersProfileHistory`, orders);\r\n  useEffect(() => {\r\n    const accessToken = getCookie(\"token\")?.split(\" \")[1];\r\n    dispatch(wsConnectionStart(USER_ORDERS_URL + `?token=${accessToken}`));\r\n    return () => {\r\n      dispatch(wsConnectionClose());\r\n      dispatch(cleanOrders());\r\n    };\r\n  }, [dispatch]);\r\n\r\n  const handleClick = (order: TWSOrder) => {\r\n    history.push({\r\n      pathname: \"/profile/orders/\" + order.number,\r\n      state: { background: location },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className={s.root}>\r\n      {orders.map((order) => (\r\n        <FeedOrderCard\r\n          status={true}\r\n          order={order}\r\n          key={order.number}\r\n          onClick={handleClick}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\nexport default ProfileHistory;\r\n","import React, {FC} from \"react\";\r\n\r\nimport s from \"./Profile.module.scss\";\r\nimport clsx from \"clsx\";\r\nimport {Switch, Route, useHistory, useRouteMatch} from \"react-router-dom\";\r\nimport {useDispatch} from \"../../services/hooks\";\r\nimport {setUserData, TUserData} from \"../../services/store/auth/authSlice\";\r\nimport {authAPI} from \"../../services/api/auth\";\r\nimport {deleteCookie} from \"../../services/utils/cookie\";\r\nimport ProfileForm from \"./ProfileForm/ProfileForm\";\r\nimport ProfileLink from \"./ProfileLink/ProfileLink\";\r\nimport ProfileHistory from \"./ProfileHistory/ProfileHistory\";\r\n\r\nconst Profile:FC = () => {\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n\r\n    const {path} = useRouteMatch();\r\n\r\n    const refreshToken = localStorage.getItem(\"refreshToken\");\r\n\r\n    const handleClickExit = async() => {\r\n        try {\r\n            await authAPI.logoutUser({token: refreshToken as string});\r\n\r\n            deleteCookie(\"token\");\r\n            localStorage.removeItem(\"refreshToken\");\r\n            dispatch(setUserData({} as TUserData));\r\n            history.replace({pathname: \"/login\"});\r\n        } catch (err) {\r\n            console.log(err);\r\n        }\r\n    };\r\n    return (\r\n        <div className={s.root}>\r\n            <div className={clsx(s.content, \"mt-30\")}>\r\n                <div\r\n                    style={{\r\n                    minWidth: 320\r\n                }}\r\n                    className={\"mr-15\"}>\r\n                    <ProfileLink text=\"Профиль\" to=\"/profile\"/>\r\n                    <ProfileLink text=\"История заказов\" to=\"/profile/orders\"/>\r\n\r\n                    <p\r\n                        className={clsx(\"text text_type_main-medium text_color_inactive mt-6\", s.exit)}\r\n                        onClick={handleClickExit}>\r\n                        Выход\r\n                    </p>\r\n                </div>\r\n                <Switch>\r\n                    <Route exact path={path}>\r\n                        <ProfileForm/>\r\n                    </Route>\r\n                    <Route exact path={`${path}/orders`}>\r\n                        <ProfileHistory/>\r\n                    </Route>\r\n                </Switch>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\nexport default Profile;\r\n","import React from \"react\";\r\nimport s from \"./Ingredients.module.scss\";\r\n\r\nimport { useParams } from \"react-router-dom\";\r\nimport { findIngredient } from \"../../services/utils/findIngredient\";\r\nimport { useSelector } from \"../../services/hooks\";\r\n\r\nconst Ingredients = () => {\r\n  const { ingredients } = useSelector((state) => state.ingredients);\r\n  const { ingredientId } = useParams<{ ingredientId?: string }>();\r\n\r\n  const ingredient = findIngredient(ingredients, ingredientId!);\r\n\r\n  return (\r\n    <div className={s.ingredient}>\r\n      <img src={ingredient?.image_large} alt={ingredient?.name} />\r\n      <p\r\n        style={{ textAlign: \"center\" }}\r\n        className=\"text text_type_main-medium mt-4\"\r\n      >\r\n        {ingredient?.name}\r\n      </p>\r\n      <p\r\n        style={{ textAlign: \"center\" }}\r\n        className=\"text text_type_main-default mt-8\"\r\n      >\r\n        Котлеты для бургеров.\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\nexport default Ingredients;\r\n","import React, {FormEvent, useState, FC} from \"react\";\r\nimport s from \"./ResetPassword.module.scss\";\r\nimport {Button, Input} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport {Link, Redirect, useHistory, useLocation} from \"react-router-dom\";\r\nimport {authAPI} from \"../../services/api/auth\";\r\nimport {ILocationState} from \"../Login/Login\";\r\n\r\nconst ResetPassword: FC = () => {\r\n    const history = useHistory();\r\n    const {state} = useLocation < ILocationState > ();\r\n    const [password,\r\n        setPassword] = useState(\"\");\r\n    const [code,\r\n        setCode] = useState(\"\");\r\n    const inputRef = React.useRef < HTMLInputElement > (null);\r\n    const refreshToken = localStorage.getItem(\"refreshToken\");\r\n\r\n    const onIconClick = () => {\r\n        setTimeout(() => {\r\n            if (inputRef && inputRef.current) {\r\n                inputRef\r\n                    .current\r\n                    .focus();\r\n            }\r\n        }, 0);\r\n        alert(\"Icon Click Callback\");\r\n    };\r\n\r\n    const handleSubmit = async(event : FormEvent) => {\r\n        event.preventDefault();\r\n        try {\r\n            await authAPI.resetPassword({password, token: code});\r\n            history.replace({pathname: \"/login\"});\r\n        } catch (err) {\r\n            console.log(`### err`, err);\r\n        }\r\n    };\r\n\r\n    if (refreshToken) {\r\n        return (<Redirect to={{\r\n            pathname: \"/\"\r\n        }}/>);\r\n    }\r\n\r\n    if (!(state\r\n        ?.from.pathname === \"/forgot-password\")) {\r\n        return (<Redirect to={{\r\n            pathname: \"/login\"\r\n        }}/>);\r\n    }\r\n    return (\r\n        <div className={s.root}>\r\n            <p className=\"text text_type_main-medium pt-6\">Восстановление пароля\r\n            </p>\r\n            <form className={s.form} onSubmit={handleSubmit}>\r\n                <div\r\n                    className={\"mb-6\"}\r\n                    style={{\r\n                    minWidth: 480\r\n                }}>\r\n                    <Input\r\n                        type={\"password\"}\r\n                        placeholder={\"Введите новый пароль\"}\r\n                        icon={\"ShowIcon\"}\r\n                        onChange={(e) => setPassword(e.target.value)}\r\n                        value={password}\r\n                        name={\"name\"}\r\n                        error={false}\r\n                        ref={inputRef}\r\n                        onIconClick={onIconClick}\r\n                        errorText={\"Ошибка\"}\r\n                        size={\"default\"}/>\r\n\r\n                    <Input\r\n                        type={\"text\"}\r\n                        placeholder={\"Введите код из письма\"}\r\n                        onChange={(e) => setCode(e.target.value)}\r\n                        value={code}\r\n                        name={\"name\"}\r\n                        error={false}\r\n                        ref={inputRef}\r\n                        onIconClick={onIconClick}\r\n                        errorText={\"Ошибка\"}\r\n                        size={\"default\"}/>\r\n                </div>\r\n                <Button type=\"primary\" size=\"medium\">\r\n                    Сохранить\r\n                </Button>\r\n            </form>\r\n            <div className={\"mt-10\"}>\r\n                <p className=\"text text_type_main-default text_color_inactive\">\r\n                    Вспомнить пароль{\" \"}\r\n                    <Link to={\"/login\"} className={\"text_color_link\"}>\r\n                        Войти\r\n                    </Link>\r\n                </p>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\nexport default ResetPassword;\r\n","import React, {FC} from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport clsx from \"clsx\";\r\nimport s from \"./NotFound.module.scss\";\r\n\r\nconst NotFound:FC = () => {\r\n  return (\r\n    <div className={s.wrapper}>\r\n      <div className={s.container}>\r\n        <div className={s.content}>\r\n          <h1>Опаньки! 404 Error</h1>\r\n          <p>Таких бургеров у нас нет</p>\r\n          <br />\r\n          <br />\r\n          <p>Поищите на <Link to='/' className={clsx(s.link)}>основном сайте</Link></p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default NotFound;\r\n","import React, {FC, useEffect, useState} from \"react\";\r\nimport {Redirect, Route} from \"react-router-dom\";\r\nimport {ReactComponentElement} from \"react\";\r\n\r\nimport {getUser} from \"../services/store/auth/authSlice\";\r\nimport {useDispatch, useSelector} from \"../services/hooks\";\r\n\r\ninterface IProtectedRoute {\r\n    children : ReactComponentElement < any >;\r\n    exact?: boolean;\r\n    path : string;\r\n}\r\n\r\nconst ProtectedRoute : FC < IProtectedRoute > = ({\r\n    children,\r\n    ...rest\r\n}) => {\r\n    const dispatch = useDispatch();\r\n    const {userData} = useSelector((state) => state.auth);\r\n    const [isUserLoaded,\r\n        setUserLoaded] = useState(false);\r\n\r\n    const init = async() => {\r\n        await dispatch(getUser());\r\n        setUserLoaded(true);\r\n    };\r\n\r\n    useEffect(() => {\r\n        init();\r\n    }, []);\r\n\r\n    if (!isUserLoaded) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={({location}) => userData.name && userData.email\r\n            ? (children)\r\n            : (<Redirect\r\n                to={{\r\n                pathname: \"/login\",\r\n                state: {\r\n                    from: location\r\n                }\r\n            }}/>)}/>\r\n    );\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import React, {FC, useEffect, useRef} from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport s from \"./ModalOverlay.module.scss\";\r\nconst modalRoot = document.getElementById(\"react-modals\");\r\n\r\ninterface IModalOverlay {\r\n    onClose() : void;\r\n}\r\n\r\nconst ModalOverlay : FC < IModalOverlay > = ({children, onClose}) => {\r\n    const overlayRef = useRef < HTMLDivElement > (null);\r\n\r\n    useEffect(() => {\r\n        const currentEl = overlayRef.current;\r\n        const handleClickClose = (ev : MouseEvent) => {\r\n            if (ev.target === currentEl) {\r\n                onClose();\r\n            }\r\n        };\r\n\r\n        if (overlayRef && currentEl) {\r\n            currentEl.addEventListener(\"click\", handleClickClose);\r\n        }\r\n        return () => {\r\n            if (overlayRef && currentEl) {\r\n                currentEl.removeEventListener(\"click\", handleClickClose);\r\n            }\r\n        };\r\n    }, [onClose]);\r\n\r\n    useEffect(() => {\r\n        const handleEsc = (ev : KeyboardEvent) => {\r\n            if (ev.key === 'Escape') {\r\n                onClose();\r\n            }\r\n        };\r\n        window.addEventListener(\"keydown\", handleEsc);\r\n\r\n        return () => {\r\n            window.removeEventListener(\"keydown\", handleEsc);\r\n        };\r\n    }, [onClose]);\r\n\r\n    return modalRoot\r\n        ? ReactDOM.createPortal(\r\n            <div ref={overlayRef} className={s.overlay}>\r\n            {children}\r\n        </div>, modalRoot)\r\n        : null;\r\n};\r\nexport default ModalOverlay;\r\n","import React, {FC} from \"react\";\r\nimport s from \"./Modal.module.scss\";\r\nimport ModalOverlay from \"./ModalOverlay/ModalOverlay\";\r\nimport {CloseIcon} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport clsx from \"clsx\";\r\n\r\nexport interface IModal {\r\n    title?: string;\r\n    onClose() : void;\r\n}\r\n\r\nconst Modal : FC < IModal > = ({title, children, onClose}) => {\r\n    return (\r\n        <ModalOverlay onClose={onClose}>\r\n            <div className={clsx(s.modal, \"pt-30 pb-30 pl-25 pr-25\")}>\r\n                <CloseIcon type=\"primary\" onClick={onClose}/>\r\n                <h3 className=\"text text_type_main-large\">{title}</h3>\r\n                {children}\r\n            </div>\r\n        </ModalOverlay>\r\n    );\r\n};\r\nexport default Modal;\r\n","import React, {FC} from \"react\";\r\nimport s from \"./OrderDetails.module.scss\";\r\nimport clsx from \"clsx\";\r\nimport {useSelector} from \"../../services/hooks\";\r\n\r\nconst OrderDetails : FC = () => {\r\n    const {orderMade} = useSelector((state) => state.order);\r\n    return (\r\n        <div className={s.order}>\r\n            <p className=\"text text_type_digits-large\">\r\n                {orderMade.order && orderMade.order.number}\r\n            </p>\r\n            <p className=\"text text_type_main-medium mt-8\">идентификатор заказа</p>\r\n            <p className=\"text text_type_main-default\">Ваш заказ начали готовить</p>\r\n            <p className={clsx(s.textColor, \"text text_type_main-default mt-2\")}>\r\n                Дождитесь готовности на орбитальной станции\r\n            </p>\r\n        </div>\r\n    );\r\n};\r\nexport default OrderDetails;\r\n","import React, { useEffect, FC } from \"react\";\r\nimport { Route, Switch, useHistory, useLocation } from \"react-router-dom\";\r\nimport history from \"history\";\r\nimport s from \"./App.module.scss\";\r\nimport AppHeader from \"../AppHeader/AppHeader\";\r\nimport Main from \"../../pages/Main/Main\";\r\nimport Login from \"../../pages/Login/Login\";\r\nimport Register from \"../../pages/Register/Register\";\r\nimport ForgotPassword from \"../../pages/ForgotPassword/ForgotPassword\";\r\nimport Profile from \"../../pages/Profile/Profile\";\r\nimport Ingredients from \"../../pages/Ingredients/Ingredients\";\r\nimport ResetPassword from \"../../pages/ResetPassword/ResetPassword\";\r\nimport NotFound from \"../../pages/NotFound/NotFound\";\r\nimport ProtectedRoute from \"../ProtectedRoute\";\r\nimport { authAPI } from \"../../services/api/auth\";\r\nimport { deleteCookie, setCookie } from \"../../services/utils/cookie\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport OrderDetails from \"../OrderDetails/OrderDetails\";\r\nimport { cleanOrderMade } from \"../../services/store/order/orderSlice\";\r\nimport {\r\n  fetchIngredients,\r\n  TIngredient,\r\n} from \"../../services/store/ingredients/ingredientsSlice\";\r\nimport Feed from \"../../pages/Feed/Feed\";\r\nimport FeedOrder from \"../../pages/Feed/FeedOrder/FeedOrder\";\r\nimport { useDispatch, useSelector } from \"../../services/hooks\";\r\n\r\nexport type IngredientsDataType = {\r\n  bun: TIngredient[];\r\n  sauce: TIngredient[];\r\n  main: TIngredient[];\r\n};\r\n\r\nexport type SelectedIngredientsType = {\r\n  bun: TIngredient | null;\r\n  other: TIngredient[];\r\n};\r\n\r\ninterface ILocation {\r\n  background?: history.Location;\r\n}\r\n\r\nconst App: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const location = useLocation<ILocation>();\r\n  const history = useHistory();\r\n  const refreshToken = localStorage.getItem(\"refreshToken\");\r\n  const { orderMade } = useSelector((state) => state.order);\r\n\r\n  const checkToken = async () => {\r\n    try {\r\n      const res = await authAPI.updateToken({\r\n        token: refreshToken as string,\r\n      });\r\n      if (res.success) {\r\n        setCookie(\"token\", res.accessToken, { expires: 1200 });\r\n        localStorage.setItem(\"refreshToken\", res.refreshToken);\r\n      } else {\r\n        deleteCookie(\"token\");\r\n        localStorage.removeItem(\"refreshToken\");\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchIngredients());\r\n    checkToken();\r\n  }, [dispatch]);\r\n\r\n  const handleCloseIngredient = () => {\r\n    history.replace({ pathname: \"/\" });\r\n  };\r\n  const handleCloseOrder = () => {\r\n    dispatch(cleanOrderMade());\r\n  };\r\n\r\n  const handleCloseOrderFeed = () => {\r\n    history.replace({ pathname: \"/feed\" });\r\n  };\r\n  const handleCloseProfileOrder = () => {\r\n    history.replace({ pathname: \"/profile/orders\" });\r\n  };\r\n  const background =\r\n    history.action === \"PUSH\" && location.state && location.state.background;\r\n\r\n  return (\r\n    <div className={s.App}>\r\n      <AppHeader />\r\n      <div className=\"content-wrapper\">\r\n        <Switch location={background || location}>\r\n          <Route exact path={\"/login\"}>\r\n            <Login />\r\n          </Route>\r\n          <Route exact path={\"/\"}>\r\n            <Main />\r\n          </Route>\r\n          <Route exact path={\"/stellar-burgers\"}>\r\n            <Main />\r\n          </Route>\r\n          <Route exact path={\"/register\"}>\r\n            <Register />\r\n          </Route>\r\n          <Route exact path={\"/forgot-password\"}>\r\n            <ForgotPassword />\r\n          </Route>\r\n          <Route exact path={\"/reset-password\"}>\r\n            <ResetPassword />\r\n          </Route>\r\n          <ProtectedRoute exact path={\"/profile/orders/:orderId\"}>\r\n            <FeedOrder profile={true} />\r\n          </ProtectedRoute>\r\n          <ProtectedRoute path={\"/profile\"}>\r\n            <Profile />\r\n          </ProtectedRoute>\r\n\r\n          <Route exact path={\"/ingredients/:ingredientId\"}>\r\n            <Ingredients />\r\n          </Route>\r\n          <Route exact path={\"/feed\"}>\r\n            <Feed />\r\n          </Route>\r\n          <Route exact path={\"/feed/:orderId\"}>\r\n            <FeedOrder />\r\n          </Route>\r\n\r\n          <Route>\r\n            <NotFound />\r\n          </Route>\r\n        </Switch>\r\n        {background && (\r\n          <>\r\n            <Route path={\"/ingredients/:ingredientId\"}>\r\n              <Modal\r\n                title={\"Детали ингредиента\"}\r\n                onClose={handleCloseIngredient}\r\n              >\r\n                <Ingredients />\r\n              </Modal>\r\n            </Route>\r\n            <Route exact path={\"/feed/:orderId\"}>\r\n              <Modal onClose={handleCloseOrderFeed}>\r\n                <FeedOrder />\r\n              </Modal>\r\n            </Route>\r\n            <Route exact path={\"/profile/orders/:orderId\"}>\r\n              <Modal onClose={handleCloseProfileOrder}>\r\n                <FeedOrder />\r\n              </Modal>\r\n            </Route>\r\n          </>\r\n        )}\r\n\r\n        {orderMade?.order?.number && (\r\n          <Modal onClose={handleCloseOrder}>\r\n            <OrderDetails />\r\n          </Modal>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport ingredientsReducer from \"./ingredients/ingredientsSlice\";\r\nimport orderReducer from \"./order/orderSlice\";\r\nimport authReducer from \"./auth/authSlice\";\r\nimport { socketMiddleware } from \"../middlewares/socket\";\r\n\r\nconst store = configureStore({\r\n  reducer: {\r\n    ingredients: ingredientsReducer,\r\n    order: orderReducer,\r\n    auth: authReducer,\r\n  },\r\n  middleware: (getDefaultMiddleware) =>\r\n    getDefaultMiddleware().concat(socketMiddleware()),\r\n  devTools: true,\r\n});\r\n\r\nexport default store;\r\n\r\nexport type TRootState = ReturnType<typeof store.getState>;\r\nexport type AppDispatch = typeof store.dispatch;","import {\r\n  wsConnectionClose,\r\n  wsConnectionStart,\r\n  wsClosed,\r\n  wsConnectionOpened,\r\n  wsGotError,\r\n  wsGotMessage,\r\n} from \"../store/order/orderSlice\";\r\nimport { AnyAction, MiddlewareAPI } from \"redux\";\r\n\r\nexport const socketMiddleware = () => {\r\n  return ({ dispatch }: MiddlewareAPI) => {\r\n    let socket: WebSocket | null = null;\r\n\r\n    return (next: (a: AnyAction) => void) => (action: AnyAction) => {\r\n      const { type, payload } = action;\r\n\r\n      if (type === wsConnectionStart.toString())\r\n        socket = new WebSocket(payload);\r\n      if (type === wsConnectionClose.toString()) socket?.close();\r\n\r\n      if (socket) {\r\n        socket.onopen = () => dispatch(wsConnectionOpened());\r\n        socket.onclose = () => dispatch(wsClosed());\r\n        socket.onerror = (event) => {\r\n          dispatch(wsGotError(event));\r\n        };\r\n        socket.onmessage = (event) =>\r\n          dispatch(wsGotMessage(JSON.parse(event.data)));\r\n      }\r\n\r\n      next(action);\r\n    };\r\n  };\r\n};\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./components/App/App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport store from \"./services/store\";\r\nimport {Provider} from \"react-redux\";\r\nimport {BrowserRouter as Router} from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n    <Provider store={store}>\r\n        <Router>\r\n            <App/>\r\n        </Router>\r\n    </Provider>\r\n</React.StrictMode>, document.getElementById(\"root\"));\r\n\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"burgerConstructor_root__3acgv\",\"over\":\"burgerConstructor_over__3k3ph\",\"ingredientsContainer\":\"burgerConstructor_ingredientsContainer__35UVh\",\"list\":\"burgerConstructor_list__1vHPg\",\"lineElement\":\"burgerConstructor_lineElement__16mOi\",\"orderContainer\":\"burgerConstructor_orderContainer__2CIbk\",\"count\":\"burgerConstructor_count__-4ln6\",\"image\":\"burgerConstructor_image__1hdJm\",\"loader\":\"burgerConstructor_loader__3aTC8\",\"button-loading-spinner\":\"burgerConstructor_button-loading-spinner__2A5js\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Feed_root__eLTM1\",\"content\":\"Feed_content__1OHfq\",\"content__column\":\"Feed_content__column__FP1EP\",\"status\":\"Feed_status__3ZgQK\",\"status__column\":\"Feed_status__column__1a17F\",\"column__feed\":\"Feed_column__feed__2kbg9\",\"text_color_bold\":\"Feed_text_color_bold__3i3z7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"FeedOrderCard_root__1Uuva\",\"line\":\"FeedOrderCard_line__2zmZx\",\"total\":\"FeedOrderCard_total__28r6V\",\"ingredients\":\"FeedOrderCard_ingredients__2IwB2\",\"img\":\"FeedOrderCard_img__1SNcU\",\"overflow\":\"FeedOrderCard_overflow__2gIdD\",\"text_color_bold\":\"FeedOrderCard_text_color_bold__1WWvf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"FeedOrder_root__2AWlf\",\"bottom\":\"FeedOrder_bottom__ZtlJ0\",\"total\":\"FeedOrder_total__Jdy-A\",\"img\":\"FeedOrder_img__2QYl9\",\"ingredients\":\"FeedOrder_ingredients__3nmsg\",\"ingredients__item\":\"FeedOrder_ingredients__item__1ge2r\",\"text_color_bold\":\"FeedOrder_text_color_bold__3o84j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Profile_root__20SBh\",\"content\":\"Profile_content__24Rfp\",\"buttonLine\":\"Profile_buttonLine__25_VK\",\"exit\":\"Profile_exit__e96fF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"AppHeader_header__uivE3\",\"content\":\"AppHeader_content__3uMST\",\"logo\":\"AppHeader_logo__w0ZHU\",\"navigation\":\"AppHeader_navigation__1WdD_\",\"flexEnd\":\"AppHeader_flexEnd__1SGeh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"NotFound_wrapper__2EhZL\",\"container\":\"NotFound_container__1H8Sv\",\"content\":\"NotFound_content__2sp8C\",\"link\":\"NotFound_link__KC2Tn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Main_main__1Khcf\",\"burgerContainer\":\"Main_burgerContainer__2TdzA\",\"text\":\"Main_text__218D3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"AppHeaderItem_root__ODs87\",\"selected\":\"AppHeaderItem_selected__3KET5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"burgerIngredients_root__1xiFf\",\"ingredientsList\":\"burgerIngredients_ingredientsList__rwZXV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"burgerIngredientsCard_card__ljlQ8\",\"priceRow\":\"burgerIngredientsCard_priceRow__1jlSM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredients\":\"burgerIngredientsContainer_ingredients__3Hjey\",\"text\":\"burgerIngredientsContainer_text__2iHFI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Login_root__280n-\",\"form\":\"Login_form__28cgk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Register_root__DoyHx\",\"form\":\"Register_form__ifdj2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"ForgotPassword_root__Depmq\",\"form\":\"ForgotPassword_form__1aaYv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"ResetPassword_root__rplXq\",\"form\":\"ResetPassword_form__zIva7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order\":\"OrderDetails_order__2FN39\",\"textColor\":\"OrderDetails_textColor__158bE\"};"],"sourceRoot":""}